import{i as ae,j as H}from"./vue-tabler-icons.es-8e16e73b.js";import{a6 as le,a7 as q,a3 as J,o as x,e as D,w as t,a as p,c as N,q as oe,d as _,t as A,i as O,l as I,b as e,V,p as F,y as a,z as L,F as j,a8 as se,a9 as K,aa as Q,al as P,L as E,ab as W,a0 as X,a5 as S,_ as f,ac as Y,ad as k,am as T,S as Z,ae as ee,C as ie,af as ne,B as M,ag as z,ah as B,ai as R,aj as G,T as de,ak as ue}from"./index-47defd12.js";import{u as te,a as w}from"./vee-validate.esm-2296aa8c.js";const U=le("complexities",{state:()=>({complexities:[],toEdit:{},toDelete:{}}),actions:{async getComplexities(){this.complexities=await q.get("api/complexities").then(d=>d.data.data)},async storeComplexity(d){await q.post("api/complexities",d).then(s=>s.data.data),await this.getComplexities()},async updateComplexity(d,s){const o=await q.put(`api/complexities/${d}`,s).then(v=>v.data.data),u=this.complexities.findIndex(v=>v.id===d);console.log(u),this.complexities.splice(u,1,o),this.getComplexities()},async deleteComplexity(d){await q.delete(`api/complexities/${d}`).then(o=>o.data.data);const s=this.complexities.findIndex(o=>o.id===d);this.complexities.splice(s,1)}}}),re=p("thead",null,[p("tr",null,[p("th",{class:"text-left"},"Nome"),p("th",{class:"text-left"},"Ativo/Inativo"),p("th",{class:"text-left"},"Ações")])],-1),ce=_(" Default "),me={class:"text-right"},pe={class:"d-flex align-center"},fe={setup(d){const s=U(),{complexities:o,toEdit:u,toDelete:v}=J(s);return(b,C)=>(x(),D(se,{class:"border-opacity-100"},{default:t(()=>[re,p("tbody",null,[(x(!0),N(j,null,oe(a(o),(r,g)=>(x(),N("tr",{key:g},[p("td",null,[_(A(r.name)+" ",1),r.is_default?(x(),D(O,{key:0,size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:t(()=>[ce]),_:1})):I("",!0)]),p("td",null,[e(O,{size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:t(()=>[_(A(r.status?"Ativo":"Inativo"),1)]),_:2},1024)]),p("td",me,[p("div",pe,[e(L,{text:"Edit"},{activator:t(({props:i})=>[e(V,F({icon:"",flat:"",onClick:n=>u.value=r},i),{default:t(()=>[e(a(ae),{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024),e(L,{text:"Delete"},{activator:t(({props:i})=>[e(V,F({icon:"",flat:"",onClick:n=>v.value=r},i),{default:t(()=>[e(a(H),{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024)])])]))),128))])]),_:1}))}},_e={emits:["cancel","add"],setup(d,{emit:s}){const o=U(),u=K({name:Q().required().label("Nome"),is_default:P().required().label("Padrão"),status:P().required().label("Status")}),{handleSubmit:v,errors:b,isSubmitting:C}=te({validationSchema:u,initialValues:{name:"",is_default:!1,status:!0}}),r=v(async c=>{await o.storeComplexity(c),s("add")}),g=E(""),{value:i}=w("name"),{value:n}=w("is_default"),{value:l}=w("status");return(c,m)=>(x(),N(j,null,[g.value?(x(),D(W,{key:0,color:"error",class:"mb-2"},{default:t(()=>[_(A(g.value),1)]),_:1})):I("",!0),e(ee,{onSubmit:Z(a(r),["prevent"])},{default:t(()=>[e(X,null,{default:t(()=>[e(S,null,{default:t(()=>[e(f,{cols:"12",md:"6"},{default:t(()=>[e(Y,{modelValue:a(i),"onUpdate:modelValue":m[0]||(m[0]=y=>k(i)?i.value=y:null),"error-messages":a(b).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1}),e(f,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:a(n),"onUpdate:modelValue":m[1]||(m[1]=y=>k(n)?n.value=y:null),label:a(n)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(f,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:a(l),"onUpdate:modelValue":m[2]||(m[2]=y=>k(l)?l.value=y:null),label:a(l)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(S,{justify:"end"},{default:t(()=>[e(f,{cols:"auto"},{default:t(()=>[e(V,{flat:"",text:"Cancelar",onClick:m[3]||(m[3]=y=>s("cancel"))})]),_:1}),e(f,{cols:"auto"},{default:t(()=>[e(V,{type:"submit",color:"primary",flat:"",loading:a(C),text:"Adicionar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},ve=_("Cancelar"),xe=_("Editar"),ye={props:{complexity:{type:Object,required:!0}},emits:["cancel","edit"],setup(d,{emit:s}){const o=d,u=E(!0),v=U(),b=K({name:Q().required().label("Nome"),is_default:P().required().label("Padrão"),status:P().required().label("Status")}),{handleSubmit:C,errors:r,isSubmitting:g}=te({validationSchema:b,initialValues:{name:o.complexity.name,is_default:o.complexity.is_default,status:o.complexity.status}}),i=C(async y=>{await v.updateComplexity(o.complexity.id,y),s("edit"),u.value=!1}),n=E(""),{value:l}=w("name"),{value:c}=w("is_default"),{value:m}=w("status");return(y,h)=>(x(),N(j,null,[n.value?(x(),D(W,{key:0,color:"error",class:"mb-2"},{default:t(()=>[_(A(n.value),1)]),_:1})):I("",!0),e(ee,{onSubmit:Z(a(i),["prevent"])},{default:t(()=>[e(X,null,{default:t(()=>[e(S,null,{default:t(()=>[e(f,{cols:"12",md:"6"},{default:t(()=>[e(Y,{modelValue:a(l),"onUpdate:modelValue":h[0]||(h[0]=$=>k(l)?l.value=$:null),"error-messages":a(r).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1}),e(f,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:a(c),"onUpdate:modelValue":h[1]||(h[1]=$=>k(c)?c.value=$:null),label:a(c)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(f,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:a(m),"onUpdate:modelValue":h[2]||(h[2]=$=>k(m)?m.value=$:null),label:a(m)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(S,{justify:"end"},{default:t(()=>[e(f,{cols:"auto"},{default:t(()=>[e(V,{flat:"",onClick:h[3]||(h[3]=$=>s("cancel"))},{default:t(()=>[ve]),_:1})]),_:1}),e(f,{cols:"auto"},{default:t(()=>[e(V,{type:"submit",color:"primary",flat:"",loading:a(g)},{default:t(()=>[xe]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},Ve={class:"mb-5 pb-5 border-b border-opacity-100"},be=p("h1",{class:"text-h3"},"Complexidades dos chamados",-1),Ce=_("Nova complexidade "),ge=_("Adicionar complexidade"),he=_("Editar complexidade"),ke=_(" Cancelar "),Se=_(" Deletar "),De=ie({setup(d){const s=U(),{toEdit:o,toDelete:u}=J(s),{isLoading:v}=ne(s.getComplexities()),b=M({get(){return!!Object.keys(o.value).length},set(i){i||(o.value={})}}),C=M({get(){return!!Object.keys(u.value).length},set(i){i||(u.value={})}}),r=E(!1);async function g(i){r.value=!0,await s.deleteComplexity(i.id),u.value={},r.value=!1}return E([{text:"2 New Complexity",disabled:!0,href:"#"}]),(i,n)=>(x(),N("div",null,[p("div",Ve,[e(S,null,{default:t(()=>[e(f,null,{default:t(()=>[be]),_:1}),e(f,{class:"text-right"},{default:t(()=>[e(z,{width:"auto"},{activator:t(({props:l})=>[e(V,F({flat:"",color:"primary"},l),{default:t(()=>[Ce]),_:2},1040)]),default:t(({isActive:l})=>[e(B,{width:"400"},{default:t(()=>[e(R,null,{default:t(()=>[ge]),_:1}),e(G,null,{default:t(()=>[e(_e,{onAdd:c=>l.value=!1,onCancel:c=>l.value=!1},null,8,["onAdd","onCancel"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1})]),_:1})]),a(v)?(x(),D(ue,{key:0,width:3,color:"primary",indeterminate:""})):(x(),N(j,{key:1},[e(fe),e(z,{modelValue:a(b),"onUpdate:modelValue":n[0]||(n[0]=l=>k(b)?b.value=l:null),width:"auto"},{default:t(({isActive:l})=>[e(B,{width:"400"},{default:t(()=>[e(R,null,{default:t(()=>[he]),_:1}),e(G,null,{default:t(()=>[e(ye,{complexity:a(o),onCancel:c=>l.value=!1,onEdit:c=>l.value=!1},null,8,["complexity","onCancel","onEdit"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]),e(z,{modelValue:a(C),"onUpdate:modelValue":n[2]||(n[2]=l=>k(C)?C.value=l:null),width:"auto"},{default:t(({isActive:l})=>[e(B,{"prepend-icon":a(H),title:"Você tem certeza que deseja deletar esta complexidade?"},{actions:t(()=>[e(de),e(V,{onClick:c=>l.value=!1},{default:t(()=>[ke]),_:2},1032,["onClick"]),e(V,{onClick:n[1]||(n[1]=c=>g(a(u))),variant:"tonal",color:"error",loading:r.value},{default:t(()=>[Se]),_:1},8,["loading"])]),_:2},1032,["prepend-icon"])]),_:1},8,["modelValue"])],64))]))}});export{De as default};
