import{i as ae,j as W}from"./vue-tabler-icons.es-e8343748.js";import{ad as le,ae as A,ac as X,o as x,e as E,w as t,a as p,c as N,F as j,q as oe,y as a,d as f,t as D,i as O,l as I,b as e,z as M,V,p as B,af as se,ag as G,ah as H,aq as P,J as q,ai as K,a3 as Q,a7 as k,a0 as _,aj as Y,ak as S,ar as T,W as Z,al as ee,C as ie,am as ne,B as R,an as U,a8 as z,aa as L,ao as J,X as ue,ap as de}from"./index-fc9b34ed.js";import{u as te,a as $}from"./vee-validate.esm-a02ea01b.js";const F=le("complexities",{state:()=>({complexities:[],toEdit:{},toDelete:{}}),actions:{async getComplexities(){this.complexities=await A.get("api/complexities").then(u=>u.data.data)},async storeComplexity(u){await A.post("api/complexities",u).then(s=>s.data.data),await this.getComplexities()},async updateComplexity(u,s){const o=await A.put(`api/complexities/${u}`,s).then(v=>v.data.data),c=this.complexities.findIndex(v=>v.id===u);this.complexities.splice(c,1,o),this.getComplexities()},async deleteComplexity(u){await A.delete(`api/complexities/${u}`).then(o=>o.data.data);const s=this.complexities.findIndex(o=>o.id===u);this.complexities.splice(s,1)}}}),re=p("thead",null,[p("tr",null,[p("th",{class:"text-left"},"Nome"),p("th",{class:"text-left"},"Ativo/Inativo"),p("th",{class:"text-left"},"Ações")])],-1),me={class:"text-right"},ce={class:"d-flex align-center"},pe={__name:"ComplexitiesTable",setup(u){const s=F(),{complexities:o,toEdit:c,toDelete:v}=X(s);return(g,h)=>(x(),E(se,{class:"border-opacity-100"},{default:t(()=>[re,p("tbody",null,[(x(!0),N(j,null,oe(a(o),(d,b)=>(x(),N("tr",{key:b},[p("td",null,[f(D(d.name)+" ",1),d.is_default?(x(),E(O,{key:0,size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:t(()=>[f(" Default ")]),_:1})):I("",!0)]),p("td",null,[e(O,{size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:t(()=>[f(D(d.status?"Ativo":"Inativo"),1)]),_:2},1024)]),p("td",me,[p("div",ce,[e(M,{text:"Edit"},{activator:t(({props:i})=>[e(V,B({icon:"",flat:"",onClick:n=>c.value=d},i),{default:t(()=>[e(a(ae),{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024),e(M,{text:"Delete"},{activator:t(({props:i})=>[e(V,B({icon:"",flat:"",onClick:n=>v.value=d},i),{default:t(()=>[e(a(W),{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024)])])]))),128))])]),_:1}))}},fe={__name:"ComplexityAddForm",emits:["cancel","add"],setup(u,{emit:s}){const o=F(),c=G({name:H().required().label("Nome"),is_default:P().required().label("Padrão"),status:P().required().label("Status")}),{handleSubmit:v,errors:g,isSubmitting:h}=te({validationSchema:c,initialValues:{name:"",is_default:!1,status:!0}}),d=v(async r=>{await o.storeComplexity(r),s("add")}),b=q(""),{value:i}=$("name"),{value:n}=$("is_default"),{value:l}=$("status");return(r,m)=>(x(),N(j,null,[b.value?(x(),E(K,{key:0,color:"error",class:"mb-2"},{default:t(()=>[f(D(b.value),1)]),_:1})):I("",!0),e(ee,{onSubmit:Z(a(d),["prevent"])},{default:t(()=>[e(Q,null,{default:t(()=>[e(k,null,{default:t(()=>[e(_,{cols:"12",md:"6"},{default:t(()=>[e(Y,{modelValue:a(i),"onUpdate:modelValue":m[0]||(m[0]=y=>S(i)?i.value=y:null),"error-messages":a(g).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1}),e(_,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:a(n),"onUpdate:modelValue":m[1]||(m[1]=y=>S(n)?n.value=y:null),label:a(n)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(_,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:a(l),"onUpdate:modelValue":m[2]||(m[2]=y=>S(l)?l.value=y:null),label:a(l)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(k,{justify:"end"},{default:t(()=>[e(_,{cols:"auto"},{default:t(()=>[e(V,{flat:"",text:"Cancelar",onClick:m[3]||(m[3]=y=>s("cancel"))})]),_:1}),e(_,{cols:"auto"},{default:t(()=>[e(V,{type:"submit",color:"primary",flat:"",loading:a(h),text:"Adicionar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},_e={__name:"ComplexityEditForm",props:{complexity:{type:Object,required:!0}},emits:["cancel","edit"],setup(u,{emit:s}){const o=u,c=q(!0),v=F(),g=G({name:H().required().label("Nome"),is_default:P().required().label("Padrão"),status:P().required().label("Status")}),{handleSubmit:h,errors:d,isSubmitting:b}=te({validationSchema:g,initialValues:{name:o.complexity.name,is_default:o.complexity.is_default,status:o.complexity.status}}),i=h(async y=>{await v.updateComplexity(o.complexity.id,y),s("edit"),c.value=!1}),n=q(""),{value:l}=$("name"),{value:r}=$("is_default"),{value:m}=$("status");return(y,C)=>(x(),N(j,null,[n.value?(x(),E(K,{key:0,color:"error",class:"mb-2"},{default:t(()=>[f(D(n.value),1)]),_:1})):I("",!0),e(ee,{onSubmit:Z(a(i),["prevent"])},{default:t(()=>[e(Q,null,{default:t(()=>[e(k,null,{default:t(()=>[e(_,{cols:"12",md:"6"},{default:t(()=>[e(Y,{modelValue:a(l),"onUpdate:modelValue":C[0]||(C[0]=w=>S(l)?l.value=w:null),"error-messages":a(d).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1}),e(_,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:a(r),"onUpdate:modelValue":C[1]||(C[1]=w=>S(r)?r.value=w:null),label:a(r)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(_,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:a(m),"onUpdate:modelValue":C[2]||(C[2]=w=>S(m)?m.value=w:null),label:a(m)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(k,{justify:"end"},{default:t(()=>[e(_,{cols:"auto"},{default:t(()=>[e(V,{flat:"",onClick:C[3]||(C[3]=w=>s("cancel"))},{default:t(()=>[f("Cancelar")]),_:1})]),_:1}),e(_,{cols:"auto"},{default:t(()=>[e(V,{type:"submit",color:"primary",flat:"",loading:a(b)},{default:t(()=>[f("Editar")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},ve={class:"mb-5 pb-5 border-b border-opacity-100"},xe=p("h1",{class:"text-h3"},"Complexidades dos chamados",-1),Ce=ie({__name:"index",setup(u){const s=F(),{toEdit:o,toDelete:c}=X(s),{isLoading:v}=ne(s.getComplexities()),g=R({get(){return!!Object.keys(o.value).length},set(i){i||(o.value={})}}),h=R({get(){return!!Object.keys(c.value).length},set(i){i||(c.value={})}}),d=q(!1);async function b(i){d.value=!0,await s.deleteComplexity(i.id),c.value={},d.value=!1}return q([{text:"2 New Complexity",disabled:!0,href:"#"}]),(i,n)=>(x(),N("div",null,[p("div",ve,[e(k,null,{default:t(()=>[e(_,null,{default:t(()=>[xe]),_:1}),e(_,{class:"text-right"},{default:t(()=>[e(U,{width:"auto"},{activator:t(({props:l})=>[e(V,B({flat:"",color:"primary"},l),{default:t(()=>[f("Nova complexidade ")]),_:2},1040)]),default:t(({isActive:l})=>[e(z,{width:"400"},{default:t(()=>[e(L,null,{default:t(()=>[f("Adicionar complexidade")]),_:1}),e(J,null,{default:t(()=>[e(fe,{onAdd:r=>l.value=!1,onCancel:r=>l.value=!1},null,8,["onAdd","onCancel"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1})]),_:1})]),a(v)?(x(),E(de,{key:0,width:3,color:"primary",indeterminate:""})):(x(),N(j,{key:1},[e(pe),e(U,{modelValue:g.value,"onUpdate:modelValue":n[0]||(n[0]=l=>g.value=l),width:"auto"},{default:t(({isActive:l})=>[e(z,{width:"400"},{default:t(()=>[e(L,null,{default:t(()=>[f("Editar complexidade")]),_:1}),e(J,null,{default:t(()=>[e(_e,{complexity:a(o),onCancel:r=>l.value=!1,onEdit:r=>l.value=!1},null,8,["complexity","onCancel","onEdit"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]),e(U,{modelValue:h.value,"onUpdate:modelValue":n[2]||(n[2]=l=>h.value=l),width:"auto"},{default:t(({isActive:l})=>[e(z,{"prepend-icon":a(W),title:"Você tem certeza que deseja deletar esta complexidade?"},{actions:t(()=>[e(ue),e(V,{onClick:r=>l.value=!1},{default:t(()=>[f(" Cancelar ")]),_:2},1032,["onClick"]),e(V,{onClick:n[1]||(n[1]=r=>b(a(c))),variant:"tonal",color:"error",loading:d.value},{default:t(()=>[f(" Deletar ")]),_:1},8,["loading"])]),_:2},1032,["prepend-icon"])]),_:1},8,["modelValue"])],64))]))}});export{Ce as default};
