import{i as ae,j as W}from"./vue-tabler-icons.es-74382ebb.js";import{ad as le,ae as E,ac as X,o as x,e as q,w as t,a as p,c as N,q as oe,d as _,t as A,i as O,l as I,b as e,V,p as F,y as a,z as M,F as T,af as se,ag as G,ah as H,aq as P,J as D,ai as K,a3 as Q,ab as $,a1 as f,aj as Y,ak as k,ar as j,W as Z,al as ee,C as ie,am as ne,B as R,an as z,a7 as B,a9 as L,ao as J,X as de,ap as ue}from"./index-aa79366d.js";import{u as te,a as S}from"./vee-validate.esm-1181447b.js";const U=le("complexities",{state:()=>({complexities:[],toEdit:{},toDelete:{}}),actions:{async getComplexities(){this.complexities=await E.get("api/complexities").then(d=>d.data.data)},async storeComplexity(d){await E.post("api/complexities",d).then(s=>s.data.data),await this.getComplexities()},async updateComplexity(d,s){const o=await E.put(`api/complexities/${d}`,s).then(v=>v.data.data),m=this.complexities.findIndex(v=>v.id===d);this.complexities.splice(m,1,o),this.getComplexities()},async deleteComplexity(d){await E.delete(`api/complexities/${d}`).then(o=>o.data.data);const s=this.complexities.findIndex(o=>o.id===d);this.complexities.splice(s,1)}}}),re=p("thead",null,[p("tr",null,[p("th",{class:"text-left"},"Nome"),p("th",{class:"text-left"},"Ativo/Inativo"),p("th",{class:"text-left"},"Ações")])],-1),ce=_(" Default "),me={class:"text-right"},pe={class:"d-flex align-center"},fe={setup(d){const s=U(),{complexities:o,toEdit:m,toDelete:v}=X(s);return(b,C)=>(x(),q(se,{class:"border-opacity-100"},{default:t(()=>[re,p("tbody",null,[(x(!0),N(T,null,oe(a(o),(u,h)=>(x(),N("tr",{key:h},[p("td",null,[_(A(u.name)+" ",1),u.is_default?(x(),q(O,{key:0,size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:t(()=>[ce]),_:1})):I("",!0)]),p("td",null,[e(O,{size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:t(()=>[_(A(u.status?"Ativo":"Inativo"),1)]),_:2},1024)]),p("td",me,[p("div",pe,[e(M,{text:"Edit"},{activator:t(({props:i})=>[e(V,F({icon:"",flat:"",onClick:n=>m.value=u},i),{default:t(()=>[e(a(ae),{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024),e(M,{text:"Delete"},{activator:t(({props:i})=>[e(V,F({icon:"",flat:"",onClick:n=>v.value=u},i),{default:t(()=>[e(a(W),{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024)])])]))),128))])]),_:1}))}},_e={emits:["cancel","add"],setup(d,{emit:s}){const o=U(),m=G({name:H().required().label("Nome"),is_default:P().required().label("Padrão"),status:P().required().label("Status")}),{handleSubmit:v,errors:b,isSubmitting:C}=te({validationSchema:m,initialValues:{name:"",is_default:!1,status:!0}}),u=v(async r=>{await o.storeComplexity(r),s("add")}),h=D(""),{value:i}=S("name"),{value:n}=S("is_default"),{value:l}=S("status");return(r,c)=>(x(),N(T,null,[h.value?(x(),q(K,{key:0,color:"error",class:"mb-2"},{default:t(()=>[_(A(h.value),1)]),_:1})):I("",!0),e(ee,{onSubmit:Z(a(u),["prevent"])},{default:t(()=>[e(Q,null,{default:t(()=>[e($,null,{default:t(()=>[e(f,{cols:"12",md:"6"},{default:t(()=>[e(Y,{modelValue:a(i),"onUpdate:modelValue":c[0]||(c[0]=y=>k(i)?i.value=y:null),"error-messages":a(b).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1}),e(f,{cols:"12",md:"6"},{default:t(()=>[e(j,{modelValue:a(n),"onUpdate:modelValue":c[1]||(c[1]=y=>k(n)?n.value=y:null),label:a(n)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e($,null,{default:t(()=>[e(f,{cols:"12",md:"6"},{default:t(()=>[e(j,{modelValue:a(l),"onUpdate:modelValue":c[2]||(c[2]=y=>k(l)?l.value=y:null),label:a(l)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e($,{justify:"end"},{default:t(()=>[e(f,{cols:"auto"},{default:t(()=>[e(V,{flat:"",text:"Cancelar",onClick:c[3]||(c[3]=y=>s("cancel"))})]),_:1}),e(f,{cols:"auto"},{default:t(()=>[e(V,{type:"submit",color:"primary",flat:"",loading:a(C),text:"Adicionar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},ve=_("Cancelar"),xe=_("Editar"),ye={props:{complexity:{type:Object,required:!0}},emits:["cancel","edit"],setup(d,{emit:s}){const o=d,m=D(!0),v=U(),b=G({name:H().required().label("Nome"),is_default:P().required().label("Padrão"),status:P().required().label("Status")}),{handleSubmit:C,errors:u,isSubmitting:h}=te({validationSchema:b,initialValues:{name:o.complexity.name,is_default:o.complexity.is_default,status:o.complexity.status}}),i=C(async y=>{await v.updateComplexity(o.complexity.id,y),s("edit"),m.value=!1}),n=D(""),{value:l}=S("name"),{value:r}=S("is_default"),{value:c}=S("status");return(y,g)=>(x(),N(T,null,[n.value?(x(),q(K,{key:0,color:"error",class:"mb-2"},{default:t(()=>[_(A(n.value),1)]),_:1})):I("",!0),e(ee,{onSubmit:Z(a(i),["prevent"])},{default:t(()=>[e(Q,null,{default:t(()=>[e($,null,{default:t(()=>[e(f,{cols:"12",md:"6"},{default:t(()=>[e(Y,{modelValue:a(l),"onUpdate:modelValue":g[0]||(g[0]=w=>k(l)?l.value=w:null),"error-messages":a(u).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1}),e(f,{cols:"12",md:"6"},{default:t(()=>[e(j,{modelValue:a(r),"onUpdate:modelValue":g[1]||(g[1]=w=>k(r)?r.value=w:null),label:a(r)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e($,null,{default:t(()=>[e(f,{cols:"12",md:"6"},{default:t(()=>[e(j,{modelValue:a(c),"onUpdate:modelValue":g[2]||(g[2]=w=>k(c)?c.value=w:null),label:a(c)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e($,{justify:"end"},{default:t(()=>[e(f,{cols:"auto"},{default:t(()=>[e(V,{flat:"",onClick:g[3]||(g[3]=w=>s("cancel"))},{default:t(()=>[ve]),_:1})]),_:1}),e(f,{cols:"auto"},{default:t(()=>[e(V,{type:"submit",color:"primary",flat:"",loading:a(h)},{default:t(()=>[xe]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},Ve={class:"mb-5 pb-5 border-b border-opacity-100"},be=p("h1",{class:"text-h3"},"Complexidades dos chamados",-1),Ce=_("Nova complexidade "),he=_("Adicionar complexidade"),ge=_("Editar complexidade"),ke=_(" Cancelar "),$e=_(" Deletar "),qe=ie({setup(d){const s=U(),{toEdit:o,toDelete:m}=X(s),{isLoading:v}=ne(s.getComplexities()),b=R({get(){return!!Object.keys(o.value).length},set(i){i||(o.value={})}}),C=R({get(){return!!Object.keys(m.value).length},set(i){i||(m.value={})}}),u=D(!1);async function h(i){u.value=!0,await s.deleteComplexity(i.id),m.value={},u.value=!1}return D([{text:"2 New Complexity",disabled:!0,href:"#"}]),(i,n)=>(x(),N("div",null,[p("div",Ve,[e($,null,{default:t(()=>[e(f,null,{default:t(()=>[be]),_:1}),e(f,{class:"text-right"},{default:t(()=>[e(z,{width:"auto"},{activator:t(({props:l})=>[e(V,F({flat:"",color:"primary"},l),{default:t(()=>[Ce]),_:2},1040)]),default:t(({isActive:l})=>[e(B,{width:"400"},{default:t(()=>[e(L,null,{default:t(()=>[he]),_:1}),e(J,null,{default:t(()=>[e(_e,{onAdd:r=>l.value=!1,onCancel:r=>l.value=!1},null,8,["onAdd","onCancel"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1})]),_:1})]),a(v)?(x(),q(ue,{key:0,width:3,color:"primary",indeterminate:""})):(x(),N(T,{key:1},[e(fe),e(z,{modelValue:a(b),"onUpdate:modelValue":n[0]||(n[0]=l=>k(b)?b.value=l:null),width:"auto"},{default:t(({isActive:l})=>[e(B,{width:"400"},{default:t(()=>[e(L,null,{default:t(()=>[ge]),_:1}),e(J,null,{default:t(()=>[e(ye,{complexity:a(o),onCancel:r=>l.value=!1,onEdit:r=>l.value=!1},null,8,["complexity","onCancel","onEdit"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]),e(z,{modelValue:a(C),"onUpdate:modelValue":n[2]||(n[2]=l=>k(C)?C.value=l:null),width:"auto"},{default:t(({isActive:l})=>[e(B,{"prepend-icon":a(W),title:"Você tem certeza que deseja deletar esta complexidade?"},{actions:t(()=>[e(de),e(V,{onClick:r=>l.value=!1},{default:t(()=>[ke]),_:2},1032,["onClick"]),e(V,{onClick:n[1]||(n[1]=r=>h(a(m))),variant:"tonal",color:"error",loading:u.value},{default:t(()=>[$e]),_:1},8,["loading"])]),_:2},1032,["prepend-icon"])]),_:1},8,["modelValue"])],64))]))}});export{qe as default};
