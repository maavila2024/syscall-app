import{i as re,j as Y}from"./vue-tabler-icons.es-e8343748.js";import{ad as de,ae as z,ac as Z,o as x,e as T,w as l,a as i,c as D,F as J,q as ue,y as t,d as v,t as E,i as M,l as X,b as e,z as G,V as C,p as W,af as ne,ag as ee,ah as N,aq as U,J as B,ai as le,a3 as te,a7 as F,a0 as s,aj as ae,ak as y,ar as q,as as I,W as oe,al as se,am as ce,B as H,an as R,a8 as L,aa as K,ao as Q,X as me,ap as fe}from"./index-fc9b34ed.js";import{u as ie,a as h}from"./vee-validate.esm-a02ea01b.js";/* empty css                                                       */const O=de("priorities",{state:()=>({priorities:[],toEdit:{},toDelete:{}}),actions:{async getPriorities(){this.priorities=await z.get("api/priorities").then(p=>p.data.data)},async storePriority(p){await z.post("api/priorities",p).then(r=>r.data.data),await this.getPriorities()},async updatePriority(p,r){const o=await z.put(`api/priorities/${p}`,r).then(g=>g.data.data),V=this.priorities.findIndex(g=>g.id===p);this.priorities.splice(V,1,o),this.getPriorities()},async deletePriority(p){await z.delete(`api/priorities/${p}`).then(o=>o.data.data);const r=this.priorities.findIndex(o=>o.id===p);this.priorities.splice(r,1)}}}),pe=i("thead",null,[i("tr",null,[i("th",{class:"text-left"},"Nome"),i("th",{class:"text-left"},"Ativo/Inativo"),i("th",{class:"text-left"},"Justificar"),i("th",{class:"text-left"},"Ações")])],-1),_e={class:"text-right"},ve={class:"d-flex align-center"},Ve={__name:"PrioritiesTable",setup(p){const r=O(),{priorities:o,toEdit:V,toDelete:g}=Z(r);return(w,$)=>(x(),T(ne,{class:"border-opacity-100"},{default:l(()=>[pe,i("tbody",null,[(x(!0),D(J,null,ue(t(o),(u,P)=>(x(),D("tr",{key:P},[i("td",null,[v(E(u.name)+" ",1),u.is_default?(x(),T(M,{key:0,size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:l(()=>[v(" Default ")]),_:1})):X("",!0)]),i("td",null,[e(M,{size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:l(()=>[v(E(u.status?"Ativo":"Inativo"),1)]),_:2},1024)]),i("td",null,[e(M,{size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:l(()=>[v(E(u.justify?"Sim":"Não"),1)]),_:2},1024)]),i("td",_e,[i("div",ve,[e(G,{text:"Edit"},{activator:l(({props:n})=>[e(C,W({icon:"",flat:"",onClick:c=>V.value=u},n),{default:l(()=>[e(t(re),{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024),e(G,{text:"Delete"},{activator:l(({props:n})=>[e(C,W({icon:"",flat:"",onClick:c=>g.value=u},n),{default:l(()=>[e(t(Y),{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024)])])]))),128))])]),_:1}))}},be=i("div",{class:"d-flex"},"Cor do texto:",-1),ye=i("div",{class:"d-flex"},"Cor de fundo do texto:",-1),he={__name:"PriorityAddForm",emits:["cancel","add"],setup(p,{emit:r}){const o=O(),V=ee({name:N().required().label("Nome"),is_default:U().required().label("Padrão"),status:U().required().label("Status"),justify:U().required().label("Justificar"),color:N().label("Cor do texto"),bg_color:N().label("Cor de fundo do texto")}),{handleSubmit:g,errors:w,isSubmitting:$}=ie({validationSchema:V,initialValues:{name:"",is_default:!1,status:!0,justify:!1,color:"#cecece",bg_color:"#cecece"}}),u=g(async A=>{await o.storePriority(A),r("add")}),P=B(""),{value:n}=h("name"),{value:c}=h("is_default"),{value:a}=h("status"),{value:m}=h("justify"),{value:k}=h("color"),{value:S}=h("bg_color"),j=[["#FF0000","#00FF00","#0000FF","#FFFF00"],["#FF00FF","#00FFFF","#800000","#808000"],["#800080","#008080","#000080","#FFA500"],["#A52A2A","#008000","#FFD700","#4B0082"]];return(A,d)=>(x(),D(J,null,[P.value?(x(),T(le,{key:0,color:"error",class:"mb-2"},{default:l(()=>[v(E(P.value),1)]),_:1})):X("",!0),e(se,{onSubmit:oe(t(u),["prevent"])},{default:l(()=>[e(te,null,{default:l(()=>[e(F,null,{default:l(()=>[e(s,{cols:"12",md:"6"},{default:l(()=>[e(ae,{modelValue:t(n),"onUpdate:modelValue":d[0]||(d[0]=f=>y(n)?n.value=f:null),"error-messages":t(w).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",md:"6"},{default:l(()=>[e(q,{modelValue:t(c),"onUpdate:modelValue":d[1]||(d[1]=f=>y(c)?c.value=f:null),label:t(c)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(F,null,{default:l(()=>[e(s,{cols:"12",md:"6"},{default:l(()=>[e(q,{modelValue:t(a),"onUpdate:modelValue":d[2]||(d[2]=f=>y(a)?a.value=f:null),label:t(a)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1}),e(s,{cols:"12",md:"6"},{default:l(()=>[e(q,{modelValue:t(m),"onUpdate:modelValue":d[3]||(d[3]=f=>y(m)?m.value=f:null),label:t(m)?"Justificar":"Não justificar",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(F,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[be,e(I,{modelValue:t(k),"onUpdate:modelValue":d[4]||(d[4]=f=>y(k)?k.value=f:null),swatches:j,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":t(w).color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(F,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[ye,e(I,{modelValue:t(S),"onUpdate:modelValue":d[5]||(d[5]=f=>y(S)?S.value=f:null),swatches:j,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":t(w).bg_color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(F,{justify:"end"},{default:l(()=>[e(s,{cols:"auto"},{default:l(()=>[e(C,{flat:"",text:"Cancelar",onClick:d[6]||(d[6]=f=>r("cancel"))})]),_:1}),e(s,{cols:"auto"},{default:l(()=>[e(C,{type:"submit",color:"primary",flat:"",loading:t($),text:"Adicionar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},ge=i("div",{class:"d-flex"},"Cor do texto:",-1),Fe=i("div",{class:"d-flex"},"Cor de fundo do texto:",-1),xe={__name:"PriorityEditForm",props:{priority:{type:Object,required:!0}},emits:["cancel","edit"],setup(p,{emit:r}){const o=p,V=B(!0),g=O(),w=ee({name:N().required().label("Nome"),is_default:U().required().label("Padrão"),status:U().required().label("Status"),justify:U().required().label("Justificar"),color:N().label("Cor do texto"),bg_color:N().label("Cor de fundo do texto")}),{handleSubmit:$,errors:u,isSubmitting:P}=ie({validationSchema:w,initialValues:{name:o.priority.name,is_default:o.priority.is_default,status:o.priority.status,justify:o.priority.justify,color:o.priority.color,bg_color:o.priority.bg_color}}),n=$(async f=>{await g.updatePriority(o.priority.id,f),r("edit"),V.value=!1}),c=B(""),{value:a}=h("name"),{value:m}=h("is_default"),{value:k}=h("status"),{value:S}=h("justify"),{value:j}=h("color"),{value:A}=h("bg_color"),d=[["#FF0000","#00FF00","#0000FF","#FFFF00"],["#FF00FF","#00FFFF","#800000","#808000"],["#800080","#008080","#000080","#FFA500"],["#A52A2A","#008000","#FFD700","#4B0082"]];return(f,_)=>(x(),D(J,null,[c.value?(x(),T(le,{key:0,color:"error",class:"mb-2"},{default:l(()=>[v(E(c.value),1)]),_:1})):X("",!0),e(se,{onSubmit:oe(t(n),["prevent"])},{default:l(()=>[e(te,null,{default:l(()=>[e(F,null,{default:l(()=>[e(s,{cols:"12",md:"6"},{default:l(()=>[e(ae,{modelValue:t(a),"onUpdate:modelValue":_[0]||(_[0]=b=>y(a)?a.value=b:null),"error-messages":t(u).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",md:"6"},{default:l(()=>[e(q,{modelValue:t(m),"onUpdate:modelValue":_[1]||(_[1]=b=>y(m)?m.value=b:null),label:t(m)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(F,null,{default:l(()=>[e(s,{cols:"12",md:"6"},{default:l(()=>[e(q,{modelValue:t(k),"onUpdate:modelValue":_[2]||(_[2]=b=>y(k)?k.value=b:null),label:t(k)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1}),e(s,{cols:"12",md:"6"},{default:l(()=>[e(q,{modelValue:t(S),"onUpdate:modelValue":_[3]||(_[3]=b=>y(S)?S.value=b:null),label:t(S)?"Justificar":"Não justificar",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(F,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[ge,e(I,{modelValue:t(j),"onUpdate:modelValue":_[4]||(_[4]=b=>y(j)?j.value=b:null),swatches:d,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":t(u).color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(F,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[Fe,e(I,{modelValue:t(A),"onUpdate:modelValue":_[5]||(_[5]=b=>y(A)?A.value=b:null),swatches:d,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":t(u).bg_color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(F,{justify:"end"},{default:l(()=>[e(s,{cols:"auto"},{default:l(()=>[e(C,{flat:"",onClick:_[6]||(_[6]=b=>r("cancel"))},{default:l(()=>[v("Cancelar")]),_:1})]),_:1}),e(s,{cols:"auto"},{default:l(()=>[e(C,{type:"submit",color:"primary",flat:"",loading:t(P)},{default:l(()=>[v("Editar")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},we={class:"mb-5 pb-5 border-b border-opacity-100"},Ce=i("h1",{class:"text-h3"},"Prioridades dos chamados",-1),je={__name:"index",setup(p){const r=O(),{toEdit:o,toDelete:V}=Z(r),{isLoading:g}=ce(r.getPriorities()),w=H({get(){return!!Object.keys(o.value).length},set(n){n||(o.value={})}}),$=H({get(){return!!Object.keys(V.value).length},set(n){n||(V.value={})}}),u=B(!1);async function P(n){u.value=!0,await r.deletePriority(n.id),V.value={},u.value=!1}return B([{text:"2 New Priority",disabled:!0,href:"#"}]),(n,c)=>(x(),D("div",null,[i("div",we,[e(F,null,{default:l(()=>[e(s,null,{default:l(()=>[Ce]),_:1}),e(s,{class:"text-right"},{default:l(()=>[e(R,{width:"auto"},{activator:l(({props:a})=>[e(C,W({flat:"",color:"primary"},a),{default:l(()=>[v("Nova prioridade ")]),_:2},1040)]),default:l(({isActive:a})=>[e(L,{width:"400"},{default:l(()=>[e(K,null,{default:l(()=>[v("Adicionar prioridade")]),_:1}),e(Q,null,{default:l(()=>[e(he,{onAdd:m=>a.value=!1,onCancel:m=>a.value=!1},null,8,["onAdd","onCancel"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1})]),_:1})]),t(g)?(x(),T(fe,{key:0,width:3,color:"primary",indeterminate:""})):(x(),D(J,{key:1},[e(Ve),e(R,{modelValue:w.value,"onUpdate:modelValue":c[0]||(c[0]=a=>w.value=a),width:"auto"},{default:l(({isActive:a})=>[e(L,{width:"400"},{default:l(()=>[e(K,null,{default:l(()=>[v("Editar prioridade")]),_:1}),e(Q,null,{default:l(()=>[e(xe,{priority:t(o),onCancel:m=>a.value=!1,onEdit:m=>a.value=!1},null,8,["priority","onCancel","onEdit"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]),e(R,{modelValue:$.value,"onUpdate:modelValue":c[2]||(c[2]=a=>$.value=a),width:"auto"},{default:l(({isActive:a})=>[e(L,{"prepend-icon":t(Y),title:"Você tem certeza que deseja deletar esta prioridade?"},{actions:l(()=>[e(me),e(C,{onClick:m=>a.value=!1},{default:l(()=>[v(" Cancelar ")]),_:2},1032,["onClick"]),e(C,{onClick:c[1]||(c[1]=m=>P(t(V))),variant:"tonal",color:"error",loading:u.value},{default:l(()=>[v(" Deletar ")]),_:1},8,["loading"])]),_:2},1032,["prepend-icon"])]),_:1},8,["modelValue"])],64))]))}};export{je as default};
