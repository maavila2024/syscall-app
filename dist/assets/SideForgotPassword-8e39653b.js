import{_ as M}from"./principal_syscall-fb96c94f.js";import{v as P,L as A,a7 as q,a8 as V,o as i,c as g,e as p,w as t,d as o,t as F,a9 as B,l as f,b as e,aB as y,aa as S,y as r,ab as $,V as C,S as T,ac as z,F as D,a,r as U,C as j,_ as L,ai as Y}from"./index-4d41c103.js";import{u as N,a as R}from"./vee-validate.esm-cfa57b0f.js";const Z=a("p",{class:"text-subtitle-1 py-6 text-10"}," Por favor, insira o endereço de e-mail associado à sua conta e nós lhe enviaremos um link por e-mail, para redefinir sua senha. ",-1),G=o("Email Address"),H=o("Recuperar senha "),I={emits:["after-request"],setup(v,{emit:l}){const m=P(),s=A(null),_=q({email:V().required().email().label("E-mail")}),{handleSubmit:x,errors:h,isSubmitting:b}=N({validationSchema:_,initialValues:{email:""}}),k=x(async d=>{s.value=null,await m.forgotPassword(d.email).then(()=>{l("after-request")}).catch(n=>{s.value=n.message})}),{value:c}=R("email");return(d,n)=>(i(),g(D,null,[s.value?(i(),p(B,{key:0,color:"error"},{default:t(()=>[o(F(s.value),1)]),_:1})):f("",!0),e(z,{onSubmit:T(r(k),["prevent"]),class:"mt-sm-13 mt-8"},{default:t(()=>[Z,e(y,{class:"text-subtitle-1 font-weight-semibold pb-2 text-lightText"},{default:t(()=>[G]),_:1}),e(S,{modelValue:r(c),"onUpdate:modelValue":n[0]||(n[0]=u=>$(c)?c.value=u:null),placeholder:"email@agcocorp.com",type:"email",autofocus:"","error-messages":r(h).email},null,8,["modelValue","error-messages"]),e(C,{size:"large",type:"submit",loading:r(b),color:"primary",block:"",flat:""},{default:t(()=>[H]),_:1},8,["loading"])]),_:1},8,["onSubmit"])],64))}},J={class:"mt-sm-13 mt-8"},K=o("Digite o seu código de segurança de 6 dígitos."),O={class:"d-flex"},Q=o("Digite a nova senha."),W={class:"d-flex"},X=o("Resetar a senha "),ee={class:"text-h6 mt-5 font-weight-regular"},te=o(" Didn't get the code? "),se=o(" Resend"),ae={emits:["after-reset"],setup(v,{emit:l}){const m=P(),s=A(null),_=q({token:V().required().label("Token"),password:V().min(8).required().matches(/^(?=.*[a-zA-Z])(?=.*[0-9])/,"Senha deve conter 8 caracteres e pelo menos uma letra e um número").label("Senha")}),{handleSubmit:x,errors:h,isSubmitting:b}=N({validationSchema:_,initialValues:{token:"",password:""}}),k=x(async n=>{s.value=null,await m.resetPassword(n.token,n.password).then(()=>{l("after-reset")}).catch(u=>{s.value=u.message})}),{value:c}=R("token"),{value:d}=R("password");return(n,u)=>{const E=U("RouterLink");return i(),g(D,null,[s.value?(i(),p(B,{key:0,color:"error"},{default:t(()=>[o(F(s.value),1)]),_:1})):f("",!0),e(z,{onSubmit:T(r(k),["prevent"]),class:"mt-sm-13 mt-8"},{default:t(()=>[a("div",J,[e(y,{class:"text-subtitle-1 font-weight-semibold pb-2 text-lightText"},{default:t(()=>[K]),_:1}),a("div",O,[e(S,{modelValue:r(c),"onUpdate:modelValue":u[0]||(u[0]=w=>$(c)?c.value=w:null),autofocus:"",maxlength:6,"error-messages":r(h).token},null,8,["modelValue","error-messages"])]),e(y,{class:"text-subtitle-1 font-weight-semibold pb-2 text-lightText"},{default:t(()=>[Q]),_:1}),a("div",W,[e(S,{modelValue:r(d),"onUpdate:modelValue":u[1]||(u[1]=w=>$(d)?d.value=w:null),type:"password",autofocus:"","error-messages":r(h).password},null,8,["modelValue","error-messages"])]),e(C,{size:"large",type:"submit",loading:r(b),color:"primary",block:"",flat:""},{default:t(()=>[X]),_:1},8,["loading"]),a("h6",ee,[te,e(E,{to:"/",class:"text-primary text-subtitle-1 text-decoration-none pl-1 font-weight-medium"},{default:t(()=>[se]),_:1})])])]),_:1},8,["onSubmit"])],64)}}},oe=o(" Sua senha foi redefinida com sucesso! "),le={setup(v){const l=A("forgotPassword");return(m,s)=>(i(),g("div",null,[l.value==="forgotPassword"?(i(),p(I,{key:0,onAfterRequest:s[0]||(s[0]=_=>l.value="resetPassword")})):f("",!0),l.value==="resetPassword"?(i(),p(ae,{key:1,onAfterReset:s[1]||(s[1]=_=>l.value="reset")})):f("",!0),l.value==="reset"?(i(),p(B,{key:2,color:"success",class:"mb-2"},{default:t(()=>[oe]),_:1})):f("",!0)]))}},re={class:"pa-3"},ie=a("div",{class:"auth-header pt-sm-6 pt-2 px-sm-6 px-3 pb-sm-6 pb-0"},[a("div",{class:"position-relative"})],-1),ne=a("div",{class:""},[a("img",{src:M,class:"position-relative d-none d-lg-flex",alt:"login-background"})],-1),ue={class:"pa-sm-7 pa-4"},ce=a("h2",{class:"text--darken-2 text-h4 font-weight-bold"},"SYSCALL",-1),de=o("Back to Login"),fe=j({setup(v){return(l,m)=>(i(),g("div",re,[e(Y,{class:"h-100vh mh-100 auth"},{default:t(()=>[e(L,{cols:"12",lg:"8",xl:"8",xxl:"9",class:"d-lg-flex align-center justify-center authentication position-relative"},{default:t(()=>[ie,ne]),_:1}),e(L,{cols:"12",lg:"4",xl:"4",xxl:"3",class:"d-flex align-center justify-center"},{default:t(()=>[a("div",ue,[ce,e(le),e(C,{size:"large",color:"lightprimary",to:"/login",block:"",class:"mt-5 text-primary",flat:""},{default:t(()=>[de]),_:1})])]),_:1})]),_:1})]))}});export{fe as default};
