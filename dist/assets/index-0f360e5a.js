import{k as Y}from"./vue-tabler-icons.es-82030ec3.js";import{a4 as re,a5 as B,a6 as Z,r as de,o as w,e as T,w as t,a as r,c as q,q as ue,d as b,t as E,i as O,l as G,b as e,V as k,p as W,A as H,z as l,F as J,a7 as ne,a8 as ee,a9 as N,ak as U,N as z,aa as te,a1 as le,M as x,L as i,ab as ae,ac as _,al as D,am as I,U as oe,ad as se,u as ce,ae as me,C as K,af as L,ag as R,ah as Q,ai as X,W as fe,aj as pe}from"./index-e5ea640e.js";import{u as ie,a as y}from"./vee-validate.esm-ffd1a9f3.js";const M=re("priorities",{state:()=>({priorities:[],toEdit:{},toDelete:{}}),actions:{async getPriorities(){this.priorities=await B.get("api/priorities").then(m=>m.data.data)},async storePriority(m){const d=await B.post("api/priorities",m).then(o=>o.data.data);this.priorities.push(d)},async updatePriority(m,d){const o=await B.put(`api/priorities/${m}`,d).then(g=>g.data.data),v=this.priorities.findIndex(g=>g.id===m);console.log(v),this.priorities.splice(v,1,o),this.getPriorities()},async deletePriority(m){await B.delete(`api/priorities/${m}`).then(o=>o.data.data);const d=this.priorities.findIndex(o=>o.id===m);this.priorities.splice(d,1)}}}),_e=r("thead",null,[r("tr",null,[r("th",{class:"text-left"},"Nome"),r("th",{class:"text-left"},"Ativo/Inativo"),r("th",{class:"text-left"},"Justificar"),r("th",{class:"text-left"},"Ações")])],-1),ve=b(" Default "),Ve={class:"text-right"},be={class:"d-flex align-center"},he={setup(m){const d=M(),{priorities:o,toEdit:v,toDelete:g}=Z(d);return(C,$)=>{const F=de("PencilIcon");return w(),T(ne,{class:"border-opacity-100"},{default:t(()=>[_e,r("tbody",null,[(w(!0),q(J,null,ue(l(o),(V,f)=>(w(),q("tr",{key:f},[r("td",null,[b(E(V.name)+" ",1),V.is_default?(w(),T(O,{key:0,size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:t(()=>[ve]),_:1})):G("",!0)]),r("td",null,[e(O,{size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:t(()=>[b(E(V.status?"Ativo":"Inativo"),1)]),_:2},1024)]),r("td",null,[e(O,{size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:t(()=>[b(E(V.justify?"Sim":"Não"),1)]),_:2},1024)]),r("td",Ve,[r("div",be,[e(H,{text:"Edit"},{activator:t(({props:s})=>[e(k,W({icon:"",flat:"",onClick:a=>v.value=V},s),{default:t(()=>[e(F,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024),e(H,{text:"Delete"},{activator:t(({props:s})=>[e(k,W({icon:"",flat:"",onClick:a=>g.value=V},s),{default:t(()=>[e(l(Y),{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024)])])]))),128))])]),_:1})}}},ye=r("div",{class:"d-flex"},"Cor do texto:",-1),ge=r("div",{class:"d-flex"},"Cor de fundo do texto:",-1),Fe={emits:["cancel","add"],setup(m,{emit:d}){const o=M(),v=ee({name:N().required().label("Nome"),is_default:U().required().label("Padrão"),status:U().required().label("Status"),justify:U().required().label("Justificar"),color:N().label("Cor do texto"),bg_color:N().label("Cor de fundo do texto")}),{handleSubmit:g,errors:C,isSubmitting:$}=ie({validationSchema:v,initialValues:{name:"",is_default:!1,status:!0,justify:!1,color:"#cecece",bg_color:"#cecece"}}),F=g(async A=>{await o.storePriority(A),d("add")}),V=z(""),{value:f}=y("name"),{value:s}=y("is_default"),{value:a}=y("status"),{value:n}=y("justify"),{value:P}=y("color"),{value:S}=y("bg_color"),j=[["#FF0000","#00FF00","#0000FF","#FFFF00"],["#FF00FF","#00FFFF","#800000","#808000"],["#800080","#008080","#000080","#FFA500"],["#A52A2A","#008000","#FFD700","#4B0082"]];return(A,u)=>(w(),q(J,null,[V.value?(w(),T(te,{key:0,color:"error",class:"mb-2"},{default:t(()=>[b(E(V.value),1)]),_:1})):G("",!0),e(se,{onSubmit:oe(l(F),["prevent"])},{default:t(()=>[e(le,null,{default:t(()=>[e(x,null,{default:t(()=>[e(i,{cols:"12",md:"6"},{default:t(()=>[e(ae,{modelValue:l(f),"onUpdate:modelValue":u[0]||(u[0]=c=>_(f)?f.value=c:null),"error-messages":l(C).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[e(D,{modelValue:l(s),"onUpdate:modelValue":u[1]||(u[1]=c=>_(s)?s.value=c:null),label:l(s)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(x,null,{default:t(()=>[e(i,{cols:"12",md:"6"},{default:t(()=>[e(D,{modelValue:l(a),"onUpdate:modelValue":u[2]||(u[2]=c=>_(a)?a.value=c:null),label:l(a)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[e(D,{modelValue:l(n),"onUpdate:modelValue":u[3]||(u[3]=c=>_(n)?n.value=c:null),label:l(n)?"Justificar":"Não justificar",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(x,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[ye,e(I,{modelValue:l(P),"onUpdate:modelValue":u[4]||(u[4]=c=>_(P)?P.value=c:null),swatches:j,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":l(C).color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(x,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[ge,e(I,{modelValue:l(S),"onUpdate:modelValue":u[5]||(u[5]=c=>_(S)?S.value=c:null),swatches:j,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":l(C).bg_color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(x,{justify:"end"},{default:t(()=>[e(i,{cols:"auto"},{default:t(()=>[e(k,{flat:"",text:"Cancelar",onClick:u[6]||(u[6]=c=>d("cancel"))})]),_:1}),e(i,{cols:"auto"},{default:t(()=>[e(k,{type:"submit",color:"primary",flat:"",loading:l($),text:"Adicionar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},xe=r("div",{class:"d-flex"},"Cor do texto:",-1),we=r("div",{class:"d-flex"},"Cor de fundo do texto:",-1),Ce=b("Cancelar"),ke=b("Editar"),$e={props:{priority:{type:Object,required:!0}},emits:["cancel","edit"],setup(m,{emit:d}){const o=m,v=z(!0),g=M(),C=ee({name:N().required().label("Nome"),is_default:U().required().label("Padrão"),status:U().required().label("Status"),justify:U().required().label("Justificar"),color:N().label("Cor do texto"),bg_color:N().label("Cor de fundo do texto")}),{handleSubmit:$,errors:F,isSubmitting:V}=ie({validationSchema:C,initialValues:{name:o.priority.name,is_default:o.priority.is_default,status:o.priority.status,justify:o.priority.justify,color:o.priority.color,bg_color:o.priority.bg_color}}),f=$(async c=>{await g.updatePriority(o.priority.id,c),d("edit"),v.value=!1}),s=z(""),{value:a}=y("name"),{value:n}=y("is_default"),{value:P}=y("status"),{value:S}=y("justify"),{value:j}=y("color"),{value:A}=y("bg_color"),u=[["#FF0000","#00FF00","#0000FF","#FFFF00"],["#FF00FF","#00FFFF","#800000","#808000"],["#800080","#008080","#000080","#FFA500"],["#A52A2A","#008000","#FFD700","#4B0082"]];return(c,p)=>(w(),q(J,null,[s.value?(w(),T(te,{key:0,color:"error",class:"mb-2"},{default:t(()=>[b(E(s.value),1)]),_:1})):G("",!0),e(se,{onSubmit:oe(l(f),["prevent"])},{default:t(()=>[e(le,null,{default:t(()=>[e(x,null,{default:t(()=>[e(i,{cols:"12",md:"6"},{default:t(()=>[e(ae,{modelValue:l(a),"onUpdate:modelValue":p[0]||(p[0]=h=>_(a)?a.value=h:null),"error-messages":l(F).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[e(D,{modelValue:l(n),"onUpdate:modelValue":p[1]||(p[1]=h=>_(n)?n.value=h:null),label:l(n)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(x,null,{default:t(()=>[e(i,{cols:"12",md:"6"},{default:t(()=>[e(D,{modelValue:l(P),"onUpdate:modelValue":p[2]||(p[2]=h=>_(P)?P.value=h:null),label:l(P)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[e(D,{modelValue:l(S),"onUpdate:modelValue":p[3]||(p[3]=h=>_(S)?S.value=h:null),label:l(S)?"Justificar":"Não justificar",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(x,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[xe,e(I,{modelValue:l(j),"onUpdate:modelValue":p[4]||(p[4]=h=>_(j)?j.value=h:null),swatches:u,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":l(F).color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(x,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[we,e(I,{modelValue:l(A),"onUpdate:modelValue":p[5]||(p[5]=h=>_(A)?A.value=h:null),swatches:u,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":l(F).bg_color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(x,{justify:"end"},{default:t(()=>[e(i,{cols:"auto"},{default:t(()=>[e(k,{flat:"",onClick:p[6]||(p[6]=h=>d("cancel"))},{default:t(()=>[Ce]),_:1})]),_:1}),e(i,{cols:"auto"},{default:t(()=>[e(k,{type:"submit",color:"primary",flat:"",loading:l(V)},{default:t(()=>[ke]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},Pe={class:"mb-5 pb-5 border-b border-opacity-100"},Se=r("h1",{class:"text-h3"},"Prioridades dos chamados",-1),je=b("Nova prioridade "),Ae=b("Adicionar prioridade"),Ne=b("Editar prioridade"),Ue=b(" Cancelar "),De=b(" Deletar "),ze=ce({setup(m){const d=M(),{toEdit:o,toDelete:v}=Z(d),{isLoading:g}=me(d.getPriorities()),C=K({get(){return!!Object.keys(o.value).length},set(f){f||(o.value={})}}),$=K({get(){return!!Object.keys(v.value).length},set(f){f||(v.value={})}}),F=z(!1);async function V(f){F.value=!0,await d.deletePriority(f.id),v.value={},F.value=!1}return z([{text:"2 New Priority",disabled:!0,href:"#"}]),(f,s)=>(w(),q("div",null,[r("div",Pe,[e(x,null,{default:t(()=>[e(i,null,{default:t(()=>[Se]),_:1}),e(i,{class:"text-right"},{default:t(()=>[e(L,{width:"auto"},{activator:t(({props:a})=>[e(k,W({flat:"",color:"primary"},a),{default:t(()=>[je]),_:2},1040)]),default:t(({isActive:a})=>[e(R,{width:"400"},{default:t(()=>[e(Q,null,{default:t(()=>[Ae]),_:1}),e(X,null,{default:t(()=>[e(Fe,{onAdd:n=>a.value=!1,onCancel:n=>a.value=!1},null,8,["onAdd","onCancel"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1})]),_:1})]),l(g)?(w(),T(pe,{key:0,width:3,color:"primary",indeterminate:""})):(w(),q(J,{key:1},[e(he),e(L,{modelValue:l(C),"onUpdate:modelValue":s[0]||(s[0]=a=>_(C)?C.value=a:null),width:"auto"},{default:t(({isActive:a})=>[e(R,{width:"400"},{default:t(()=>[e(Q,null,{default:t(()=>[Ne]),_:1}),e(X,null,{default:t(()=>[e($e,{priority:l(o),onCancel:n=>a.value=!1,onEdit:n=>a.value=!1},null,8,["priority","onCancel","onEdit"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]),e(L,{modelValue:l($),"onUpdate:modelValue":s[2]||(s[2]=a=>_($)?$.value=a:null),width:"auto"},{default:t(({isActive:a})=>[e(R,{"prepend-icon":l(Y),title:"Você tem certeza que deseja deletar esta prioridade?"},{actions:t(()=>[e(fe),e(k,{onClick:n=>a.value=!1},{default:t(()=>[Ue]),_:2},1032,["onClick"]),e(k,{onClick:s[1]||(s[1]=n=>V(l(v))),variant:"tonal",color:"error",loading:F.value},{default:t(()=>[De]),_:1},8,["loading"])]),_:2},1032,["prepend-icon"])]),_:1},8,["modelValue"])],64))]))}});export{ze as default};
