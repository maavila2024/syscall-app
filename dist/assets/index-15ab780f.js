import{i as P}from"./vue-tabler-icons.es-6e767d1e.js";import{a3 as W,a4 as k,a5 as U,r as X,o as f,e as x,w as t,a as r,c as b,q as A,d as _,t as C,i as F,l as D,F as y,b as e,V as h,p as N,A as j,z as n,a6 as Y,a7 as L,a8 as O,L as $,a9 as R,aa as G,ab as w,S as H,ac as J,u as Z,ad as ee,C as q,_ as B,ae as T,af as E,ag as I,ah as M,ai as te,T as ae,aj as se}from"./index-d09a71cf.js";import{u as K,a as Q}from"./vee-validate.esm-434dec2d.js";const S=W("teams",{state:()=>({teams:[],toEdit:{},toDelete:{}}),actions:{async getTeams(){this.teams=await k.get("api/teams").then(d=>d.data.data)},async storeTeam(d){const o=await k.post("api/teams",d).then(l=>l.data.data);this.teams.push(o)},async updateTeam(d,o){const l=await k.put(`api/teams/${d}`,o).then(p=>p.data.data),c=this.teams.findIndex(p=>p.token===d);console.log(c),this.teams.splice(c,1,l)},async deleteTeam(d){await k.delete(`api/teams/${d}`).then(l=>l.data.data);const o=this.teams.findIndex(l=>l.token===d);this.teams.splice(o,1)}}}),le=r("thead",null,[r("tr",null,[r("th",{class:"text-left"}," Time "),r("th",{class:"text-left"}," Cargo "),r("th",{class:"text-left"}," Ações "),r("th")])],-1),oe=_(" Default "),ne={class:"text-right"},ie={class:"d-flex align-center"},re={setup(d){const o=S(),{teams:l,toEdit:c,toDelete:p}=U(o);return(g,V)=>{const v=X("PencilIcon");return f(),x(Y,{class:"border-opacity-100"},{default:t(()=>[le,r("tbody",null,[(f(!0),b(y,null,A(n(l),u=>(f(),b("tr",{key:u.name},[r("td",null,[_(C(u.name)+" ",1),u.default?(f(),x(F,{key:0,size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:t(()=>[oe]),_:1})):D("",!0)]),r("td",null,[(f(!0),b(y,null,A(u.roles,s=>(f(),x(F,{key:`${u.token}_${s.name}`,size:"small",variant:"tonal"},{default:t(()=>[_(C(s.name),1)]),_:2},1024))),128))]),r("td",ne,[r("div",ie,[e(j,{text:"Edit"},{activator:t(({props:s})=>[e(h,N({icon:"",flat:"",onClick:i=>c.value=u},s),{default:t(()=>[e(v,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024),e(j,{text:"Delete"},{activator:t(({props:s})=>[e(h,N({icon:"",flat:"",onClick:i=>p.value=u},s),{default:t(()=>[e(n(P),{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024)])])]))),128))])]),_:1})}}},de={class:"text-right"},ue={emits:["cancel","add"],setup(d,{emit:o}){const l=S(),c=L({name:O().required().label("Nome")}),{handleSubmit:p,errors:g,isSubmitting:V}=K({validationSchema:c,initialValues:{name:""}}),v=p(async i=>{await l.storeTeam(i),o("add")}),u=$(""),{value:s}=Q("name");return(i,a)=>(f(),b(y,null,[u.value?(f(),x(R,{key:0,color:"error",class:"mb-2"},{default:t(()=>[_(C(u.value),1)]),_:1})):D("",!0),e(J,{onSubmit:H(n(v),["prevent"])},{default:t(()=>[e(G,{modelValue:n(s),"onUpdate:modelValue":a[0]||(a[0]=m=>w(s)?s.value=m:null),"error-messages":n(g).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"]),r("div",de,[e(h,{flat:"",text:"Cancelar",onClick:a[1]||(a[1]=m=>o("cancel"))}),e(h,{type:"submit",color:"primary",flat:"",loading:n(V),text:"Adicionar"},null,8,["loading"])])]),_:1},8,["onSubmit"])],64))}},ce={class:"text-right"},me={props:{team:{type:Object,required:!0}},emits:["cancel","edit"],setup(d,{emit:o}){const l=d,c=S(),p=L({name:O().required().label("Nome")}),{handleSubmit:g,errors:V,isSubmitting:v}=K({validationSchema:p,initialValues:{name:l.team.name}}),u=g(async a=>{await c.updateTeam(l.team.token,a),o("edit")}),s=$(""),{value:i}=Q("name");return(a,m)=>(f(),b(y,null,[s.value?(f(),x(R,{key:0,color:"error",class:"mb-2"},{default:t(()=>[_(C(s.value),1)]),_:1})):D("",!0),e(J,{onSubmit:H(n(u),["prevent"])},{default:t(()=>[e(G,{modelValue:n(i),"onUpdate:modelValue":m[0]||(m[0]=z=>w(i)?i.value=z:null),"error-messages":n(V).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"]),r("div",ce,[e(h,{flat:"",text:"Cancelar",onClick:m[1]||(m[1]=z=>o("cancel"))}),e(h,{type:"submit",color:"primary",flat:"",loading:n(v),text:"Editar"},null,8,["loading"])])]),_:1},8,["onSubmit"])],64))}},fe={class:"mb-5 pb-5 border-b border-opacity-100"},pe=r("h1",{class:"text-h3"},"Meus times",-1),_e=_("Novo time "),ve=_("Adicionar time"),he=_("Editar time"),ge=_(" Cancelar "),Ve=_(" Deletar "),ke=Z({setup(d){const o=S(),{toEdit:l,toDelete:c}=U(o),{isLoading:p}=ee(o.getTeams()),g=q({get(){return!!Object.keys(l.value).length},set(s){s||(l.value={})}}),V=q({get(){return!!Object.keys(c.value).length},set(s){s||(c.value={})}}),v=$(!1);async function u(s){v.value=!0,await o.deleteTeam(s.token),c.value={},v.value=!1}return $([{text:"2 New Team",disabled:!0,href:"#"}]),(s,i)=>(f(),b("div",null,[r("div",fe,[e(te,null,{default:t(()=>[e(B,null,{default:t(()=>[pe]),_:1}),e(B,{class:"text-right"},{default:t(()=>[e(T,{width:"auto"},{activator:t(({props:a})=>[e(h,N({flat:"",color:"primary"},a),{default:t(()=>[_e]),_:2},1040)]),default:t(({isActive:a})=>[e(E,{width:"400"},{default:t(()=>[e(I,null,{default:t(()=>[ve]),_:1}),e(M,null,{default:t(()=>[e(ue,{onAdd:m=>a.value=!1,onCancel:m=>a.value=!1},null,8,["onAdd","onCancel"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1})]),_:1})]),n(p)?(f(),x(se,{key:0,width:3,color:"primary",indeterminate:""})):(f(),b(y,{key:1},[e(re),e(T,{modelValue:n(g),"onUpdate:modelValue":i[0]||(i[0]=a=>w(g)?g.value=a:null),width:"auto"},{default:t(({isActive:a})=>[e(E,{width:"400"},{default:t(()=>[e(I,null,{default:t(()=>[he]),_:1}),e(M,null,{default:t(()=>[e(me,{team:n(l),onCancel:m=>a.value=!1,onEdit:m=>a.value=!1},null,8,["team","onCancel","onEdit"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]),e(T,{modelValue:n(V),"onUpdate:modelValue":i[2]||(i[2]=a=>w(V)?V.value=a:null),width:"auto"},{default:t(({isActive:a})=>[e(E,{"prepend-icon":n(P),title:"Você tem certeza que deseja deletar este time?"},{actions:t(()=>[e(ae),e(h,{onClick:m=>a.value=!1},{default:t(()=>[ge]),_:2},1032,["onClick"]),e(h,{onClick:i[1]||(i[1]=m=>u(n(c))),variant:"tonal",color:"error",loading:v.value},{default:t(()=>[Ve]),_:1},8,["loading"])]),_:2},1032,["prepend-icon"])]),_:1},8,["modelValue"])],64))]))}});export{ke as default};
