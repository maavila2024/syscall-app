import{i as oe,j as K}from"./vue-tabler-icons.es-e8343748.js";import{ad as ue,ae as $,ac as Q,o as _,e as y,w as a,a as u,c as A,F as I,q as de,y as t,d as p,t as N,i as O,l as U,b as e,z as W,V as g,p as J,af as ne,ag as Y,ah as w,aq as P,J as q,ai as Z,a3 as ee,a7 as B,a0 as n,aj as ae,ak as b,ar as j,as as z,W as te,al as le,C as re,am as ie,B as X,an as R,a8 as L,aa as G,ao as H,X as ce,ap as Fe}from"./index-fc9b34ed.js";import{u as se,a as h}from"./vee-validate.esm-a02ea01b.js";const M=ue("tasksStatus",{state:()=>({tasksStatus:[],toEdit:{},toDelete:{}}),actions:{async getTasksStatus(){this.tasksStatus=await $.get("api/tasks-status").then(m=>m.data.data)},async storeTaskStatus(m){await $.post("api/tasks-status",m).then(d=>d.data.data),await this.getTasksStatus()},async updateTaskStatus(m,d){const o=await $.put(`api/tasks-status/${m}`,d).then(v=>v.data.data),C=this.tasksStatus.findIndex(v=>v.id===m);this.tasksStatus.splice(C,1,o),this.getTasksStatus()},async deleteTaskStatus(m){await $.delete(`api/tasks-status/${m}`).then(o=>o.data.data);const d=this.tasksStatus.findIndex(o=>o.id===m);this.tasksStatus.splice(d,1)}}}),me=u("thead",null,[u("tr",null,[u("th",{class:"text-left"},"Nome"),u("th",{class:"text-left"},"Padrão"),u("th",{class:"text-left"},"Ativo/Inativo"),u("th",{class:"text-left"},"Ações")])],-1),fe={class:"text-right"},Ce={class:"d-flex align-center"},_e={__name:"TasksStatusTable",setup(m){const d=M(),{tasksStatus:o,toEdit:C,toDelete:v}=Q(d);return(k,D)=>(_(),y(ne,{class:"border-opacity-100"},{default:a(()=>[me,u("tbody",null,[(_(!0),A(I,null,de(t(o),r=>(_(),A("tr",{key:r.name},[u("td",null,[p(N(r.name)+" ",1),r.default?(_(),y(O,{key:0,size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:a(()=>[p(" Default ")]),_:1})):U("",!0)]),u("td",null,[r.is_default?(_(),y(O,{key:0,size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:a(()=>[p(" Default ")]),_:1})):U("",!0)]),u("td",null,[e(O,{size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:a(()=>[p(N(r.status?"Ativo":"Inativo"),1)]),_:2},1024)]),u("td",fe,[u("div",Ce,[e(W,{text:"Edit"},{activator:a(({props:E})=>[e(g,J({icon:"",flat:"",onClick:i=>C.value=r},E),{default:a(()=>[e(t(oe),{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024),e(W,{text:"Delete"},{activator:a(({props:E})=>[e(g,J({icon:"",flat:"",onClick:i=>v.value=r},E),{default:a(()=>[e(t(K),{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024)])])]))),128))])]),_:1}))}},ve=u("div",{class:"d-flex"},"Cor do texto:",-1),pe=u("div",{class:"d-flex"},"Cor de fundo do texto:",-1),Be={__name:"TaskStatusAddForm",emits:["cancel","add"],setup(m,{emit:d}){const o=M(),C=Y({name:w().required().label("Nome"),is_default:P().required().label("Padrão"),status:P().required().label("Status"),color:w().label("Cor do texto"),bg_color:w().label("Cor de fundo do texto")}),{handleSubmit:v,errors:k,isSubmitting:D}=se({validationSchema:C,initialValues:{name:"",is_default:!1,status:!0,color:"#cecece",bg_color:"#cecece"}}),r=v(async T=>{await o.storeTaskStatus(T),d("add")}),E=q(""),{value:i}=h("name"),{value:c}=h("is_default"),{value:l}=h("status"),{value:f}=h("color"),{value:S}=h("bg_color"),x=[["#F44336","#E91E63","#9C27B0","#673AB7"],["#3F51B5","#2196F3","#03A9F4","#00BCD4"],["#009688","#4CAF50","#8BC34A","#CDDC39"],["#FFEB3B","#FFC107","#FF9800","#FF5722"],["#795548","#9E9E9E","#607D8B","#000000"],["#FFFFFF","#F5F5F5","#E0E0E0","#BDBDBD"],["#FFCDD2","#F8BBD0","#E1BEE7","#D1C4E9"],["#C5CAE9","#BBDEFB","#B3E5FC","#B2EBF2"],["#B2DFDB","#C8E6C9","#DCEDC8","#F0F4C3"],["#FFF9C4","#FFECB3","#FFE0B2","#FFCCBC"],["#D7CCC8","#CFD8DC","#FF8A80","#FF80AB"],["#EA80FC","#B388FF","#8C9EFF","#82B1FF"],["#80D8FF","#84FFFF","#A7FFEB","#B9F6CA"],["#CCFF90","#F4FF81","#FFFF8D","#FFE57F"],["#FFD180","#FF9E80","#BDBDBD","#616161"]];return(T,F)=>(_(),A(I,null,[E.value?(_(),y(Z,{key:0,color:"error",class:"mb-2"},{default:a(()=>[p(N(E.value),1)]),_:1})):U("",!0),e(le,{onSubmit:te(t(r),["prevent"])},{default:a(()=>[e(ee,null,{default:a(()=>[e(B,null,{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[e(ae,{modelValue:t(i),"onUpdate:modelValue":F[0]||(F[0]=s=>b(i)?i.value=s:null),"error-messages":t(k).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(B,null,{default:a(()=>[e(n,{cols:"12",md:"6"},{default:a(()=>[e(j,{modelValue:t(c),"onUpdate:modelValue":F[1]||(F[1]=s=>b(c)?c.value=s:null),label:t(c)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1}),e(n,{cols:"12",md:"6"},{default:a(()=>[e(j,{modelValue:t(l),"onUpdate:modelValue":F[2]||(F[2]=s=>b(l)?l.value=s:null),label:t(l)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(B,null,{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[ve,e(z,{modelValue:t(f),"onUpdate:modelValue":F[3]||(F[3]=s=>b(f)?f.value=s:null),swatches:x,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":t(k).color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(B,null,{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[pe,e(z,{modelValue:t(S),"onUpdate:modelValue":F[4]||(F[4]=s=>b(S)?S.value=s:null),swatches:x,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":t(k).bg_color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(B,{justify:"end"},{default:a(()=>[e(n,{cols:"auto"},{default:a(()=>[e(g,{flat:"",text:"Cancelar",onClick:F[5]||(F[5]=s=>d("cancel"))})]),_:1}),e(n,{cols:"auto"},{default:a(()=>[e(g,{type:"submit",color:"primary",flat:"",loading:t(D),text:"Adicionar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},Ee=u("div",{class:"d-flex"},"Cor do texto:",-1),Ve=u("div",{class:"d-flex"},"Cor de fundo do texto:",-1),be={__name:"TaskStatusEditForm",props:{taskStatus:{type:Object,required:!0}},emits:["cancel","edit"],setup(m,{emit:d}){const o=m,C=M(),v=Y({name:w().required().label("Nome"),is_default:P().required().label("Padrão"),status:P().required().label("Status"),color:w().label("Cor do texto"),bg_color:w().label("Cor de fundo do texto")}),{handleSubmit:k,errors:D,isSubmitting:r}=se({validationSchema:v,initialValues:{name:o.taskStatus.name,is_default:o.taskStatus.is_default,status:o.taskStatus.status,color:o.taskStatus.color,bg_color:o.taskStatus.bg_color}}),E=k(async F=>{await C.updateTaskStatus(o.taskStatus.id,F),d("edit")}),i=q(""),{value:c}=h("name"),{value:l}=h("is_default"),{value:f}=h("status"),{value:S}=h("color"),{value:x}=h("bg_color"),T=[["#F44336","#E91E63","#9C27B0","#673AB7"],["#3F51B5","#2196F3","#03A9F4","#00BCD4"],["#009688","#4CAF50","#8BC34A","#CDDC39"],["#FFEB3B","#FFC107","#FF9800","#FF5722"],["#795548","#9E9E9E","#607D8B","#000000"],["#FFFFFF","#F5F5F5","#E0E0E0","#BDBDBD"],["#FFCDD2","#F8BBD0","#E1BEE7","#D1C4E9"],["#C5CAE9","#BBDEFB","#B3E5FC","#B2EBF2"],["#B2DFDB","#C8E6C9","#DCEDC8","#F0F4C3"],["#FFF9C4","#FFECB3","#FFE0B2","#FFCCBC"],["#D7CCC8","#CFD8DC","#FF8A80","#FF80AB"],["#EA80FC","#B388FF","#8C9EFF","#82B1FF"],["#80D8FF","#84FFFF","#A7FFEB","#B9F6CA"],["#CCFF90","#F4FF81","#FFFF8D","#FFE57F"],["#FFD180","#FF9E80","#BDBDBD","#616161"]];return(F,s)=>(_(),A(I,null,[i.value?(_(),y(Z,{key:0,color:"error",class:"mb-2"},{default:a(()=>[p(N(i.value),1)]),_:1})):U("",!0),e(le,{onSubmit:te(t(E),["prevent"])},{default:a(()=>[e(ee,null,{default:a(()=>[e(B,null,{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[e(ae,{modelValue:t(c),"onUpdate:modelValue":s[0]||(s[0]=V=>b(c)?c.value=V:null),"error-messages":t(D).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(B,null,{default:a(()=>[e(n,{cols:"12",md:"6"},{default:a(()=>[e(j,{modelValue:t(l),"onUpdate:modelValue":s[1]||(s[1]=V=>b(l)?l.value=V:null),label:t(l)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1}),e(n,{cols:"12",md:"6"},{default:a(()=>[e(j,{modelValue:t(f),"onUpdate:modelValue":s[2]||(s[2]=V=>b(f)?f.value=V:null),label:t(f)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(B,null,{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[Ee,e(z,{modelValue:t(S),"onUpdate:modelValue":s[3]||(s[3]=V=>b(S)?S.value=V:null),swatches:T,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":t(D).color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(B,null,{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[Ve,e(z,{modelValue:t(x),"onUpdate:modelValue":s[4]||(s[4]=V=>b(x)?x.value=V:null),swatches:T,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":t(D).bg_color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(B,{justify:"end"},{default:a(()=>[e(n,{cols:"auto"},{default:a(()=>[e(g,{flat:"",text:"Cancelar",onClick:s[5]||(s[5]=V=>d("cancel"))})]),_:1}),e(n,{cols:"auto"},{default:a(()=>[e(g,{type:"submit",color:"primary",flat:"",loading:t(r),text:"Editar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},he={class:"mb-5 pb-5 border-b border-opacity-100"},ke=u("h1",{class:"text-h3"},"Status dos Chamados",-1),xe=re({__name:"index",setup(m){const d=M(),{toEdit:o,toDelete:C}=Q(d),{isLoading:v}=ie(d.getTasksStatus()),k=X({get(){return!!Object.keys(o.value).length},set(i){i||(o.value={})}}),D=X({get(){return!!Object.keys(C.value).length},set(i){i||(C.value={})}}),r=q(!1);async function E(i){r.value=!0,await d.deleteTaskStatus(i.id),C.value={},r.value=!1}return q([{text:"2 New Task",disabled:!0,href:"#"}]),(i,c)=>(_(),A("div",null,[u("div",he,[e(B,null,{default:a(()=>[e(n,null,{default:a(()=>[ke]),_:1}),e(n,{class:"text-right"},{default:a(()=>[e(R,{width:"auto"},{activator:a(({props:l})=>[e(g,J({flat:"",color:"primary"},l),{default:a(()=>[p("Novo status ")]),_:2},1040)]),default:a(({isActive:l})=>[e(L,{width:"400"},{default:a(()=>[e(G,null,{default:a(()=>[p("Adicionar status")]),_:1}),e(H,null,{default:a(()=>[e(Be,{onAdd:f=>l.value=!1,onCancel:f=>l.value=!1},null,8,["onAdd","onCancel"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1})]),_:1})]),t(v)?(_(),y(Fe,{key:0,width:3,color:"primary",indeterminate:""})):(_(),A(I,{key:1},[e(_e),e(R,{modelValue:k.value,"onUpdate:modelValue":c[0]||(c[0]=l=>k.value=l),width:"auto"},{default:a(({isActive:l})=>[e(L,{width:"400"},{default:a(()=>[e(G,null,{default:a(()=>[p("Editar status")]),_:1}),e(H,null,{default:a(()=>[e(be,{taskStatus:t(o),onCancel:f=>l.value=!1,onEdit:f=>l.value=!1},null,8,["taskStatus","onCancel","onEdit"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]),e(R,{modelValue:D.value,"onUpdate:modelValue":c[2]||(c[2]=l=>D.value=l),width:"auto"},{default:a(({isActive:l})=>[e(L,{"prepend-icon":t(K),title:"Você tem certeza que deseja deletar este status?"},{actions:a(()=>[e(ce),e(g,{onClick:f=>l.value=!1},{default:a(()=>[p(" Cancelar ")]),_:2},1032,["onClick"]),e(g,{onClick:c[1]||(c[1]=f=>E(t(C))),variant:"tonal",color:"error",loading:r.value},{default:a(()=>[p(" Deletar ")]),_:1},8,["loading"])]),_:2},1032,["prepend-icon"])]),_:1},8,["modelValue"])],64))]))}});export{xe as default};
