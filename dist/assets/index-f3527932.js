import{i as H}from"./vue-tabler-icons.es-0b91f744.js";import{a3 as ae,a4 as E,a5 as J,r as le,o as x,e as A,w as t,a as p,c as N,q as oe,d as _,t as P,i as O,l as B,b as e,V as b,p as F,A as L,z as l,F as U,a6 as se,a7 as K,a8 as Q,ak as q,L as D,a9 as W,a0 as X,ai as S,_ as f,aa as Y,ab as k,al as T,S as Z,ac as ee,u as ie,ad as ne,C as M,ae as I,af as z,ag as R,ah as G,T as de,aj as ue}from"./index-a1993733.js";import{u as te,a as w}from"./vee-validate.esm-5ac58de0.js";const j=ae("complexities",{state:()=>({complexities:[],toEdit:{},toDelete:{}}),actions:{async getComplexities(){this.complexities=await E.get("api/complexities").then(n=>n.data.data)},async storeComplexity(n){const i=await E.post("api/complexities",n).then(o=>o.data.data);this.complexities.push(i)},async updateComplexity(n,i){const o=await E.put(`api/complexities/${n}`,i).then(v=>v.data.data),u=this.complexities.findIndex(v=>v.id===n);console.log(u),this.complexities.splice(u,1,o),this.getComplexities()},async deleteComplexity(n){await E.delete(`api/complexities/${n}`).then(o=>o.data.data);const i=this.complexities.findIndex(o=>o.id===n);this.complexities.splice(i,1)}}}),re=p("thead",null,[p("tr",null,[p("th",{class:"text-left"},"Nome"),p("th",{class:"text-left"},"Ativo/Inativo"),p("th",{class:"text-left"},"Ações")])],-1),ce=_(" Default "),me={class:"text-right"},pe={class:"d-flex align-center"},fe={setup(n){const i=j(),{complexities:o,toEdit:u,toDelete:v}=J(i);return(C,h)=>{const y=le("PencilIcon");return x(),A(se,{class:"border-opacity-100"},{default:t(()=>[re,p("tbody",null,[(x(!0),N(U,null,oe(l(o),(m,d)=>(x(),N("tr",{key:d},[p("td",null,[_(P(m.name)+" ",1),m.is_default?(x(),A(O,{key:0,size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:t(()=>[ce]),_:1})):B("",!0)]),p("td",null,[e(O,{size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:t(()=>[_(P(m.status?"Ativo":"Inativo"),1)]),_:2},1024)]),p("td",me,[p("div",pe,[e(L,{text:"Edit"},{activator:t(({props:s})=>[e(b,F({icon:"",flat:"",onClick:a=>u.value=m},s),{default:t(()=>[e(y,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024),e(L,{text:"Delete"},{activator:t(({props:s})=>[e(b,F({icon:"",flat:"",onClick:a=>v.value=m},s),{default:t(()=>[e(l(H),{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024)])])]))),128))])]),_:1})}}},_e={emits:["cancel","add"],setup(n,{emit:i}){const o=j(),u=K({name:Q().required().label("Nome"),is_default:q().required().label("Padrão"),status:q().required().label("Status")}),{handleSubmit:v,errors:C,isSubmitting:h}=te({validationSchema:u,initialValues:{name:"",is_default:!1,status:!0}}),y=v(async r=>{await o.storeComplexity(r),i("add")}),m=D(""),{value:d}=w("name"),{value:s}=w("is_default"),{value:a}=w("status");return(r,c)=>(x(),N(U,null,[m.value?(x(),A(W,{key:0,color:"error",class:"mb-2"},{default:t(()=>[_(P(m.value),1)]),_:1})):B("",!0),e(ee,{onSubmit:Z(l(y),["prevent"])},{default:t(()=>[e(X,null,{default:t(()=>[e(S,null,{default:t(()=>[e(f,{cols:"12",md:"6"},{default:t(()=>[e(Y,{modelValue:l(d),"onUpdate:modelValue":c[0]||(c[0]=V=>k(d)?d.value=V:null),"error-messages":l(C).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1}),e(f,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:l(s),"onUpdate:modelValue":c[1]||(c[1]=V=>k(s)?s.value=V:null),label:l(s)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(f,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:l(a),"onUpdate:modelValue":c[2]||(c[2]=V=>k(a)?a.value=V:null),label:l(a)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(S,{justify:"end"},{default:t(()=>[e(f,{cols:"auto"},{default:t(()=>[e(b,{flat:"",text:"Cancelar",onClick:c[3]||(c[3]=V=>i("cancel"))})]),_:1}),e(f,{cols:"auto"},{default:t(()=>[e(b,{type:"submit",color:"primary",flat:"",loading:l(h),text:"Adicionar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},ve=_("Cancelar"),xe=_("Editar"),ye={props:{complexity:{type:Object,required:!0}},emits:["cancel","edit"],setup(n,{emit:i}){const o=n,u=D(!0),v=j(),C=K({name:Q().required().label("Nome"),is_default:q().required().label("Padrão"),status:q().required().label("Status")}),{handleSubmit:h,errors:y,isSubmitting:m}=te({validationSchema:C,initialValues:{name:o.complexity.name,is_default:o.complexity.is_default,status:o.complexity.status}}),d=h(async V=>{await v.updateComplexity(o.complexity.id,V),i("edit"),u.value=!1}),s=D(""),{value:a}=w("name"),{value:r}=w("is_default"),{value:c}=w("status");return(V,g)=>(x(),N(U,null,[s.value?(x(),A(W,{key:0,color:"error",class:"mb-2"},{default:t(()=>[_(P(s.value),1)]),_:1})):B("",!0),e(ee,{onSubmit:Z(l(d),["prevent"])},{default:t(()=>[e(X,null,{default:t(()=>[e(S,null,{default:t(()=>[e(f,{cols:"12",md:"6"},{default:t(()=>[e(Y,{modelValue:l(a),"onUpdate:modelValue":g[0]||(g[0]=$=>k(a)?a.value=$:null),"error-messages":l(y).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1}),e(f,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:l(r),"onUpdate:modelValue":g[1]||(g[1]=$=>k(r)?r.value=$:null),label:l(r)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(f,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:l(c),"onUpdate:modelValue":g[2]||(g[2]=$=>k(c)?c.value=$:null),label:l(c)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(S,{justify:"end"},{default:t(()=>[e(f,{cols:"auto"},{default:t(()=>[e(b,{flat:"",onClick:g[3]||(g[3]=$=>i("cancel"))},{default:t(()=>[ve]),_:1})]),_:1}),e(f,{cols:"auto"},{default:t(()=>[e(b,{type:"submit",color:"primary",flat:"",loading:l(m)},{default:t(()=>[xe]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},Ve={class:"mb-5 pb-5 border-b border-opacity-100"},be=p("h1",{class:"text-h3"},"Complexidades dos chamados",-1),Ce=_("Nova complexidade "),he=_("Adicionar complexidade"),ge=_("Editar complexidade"),ke=_(" Cancelar "),Se=_(" Deletar "),Ae=ie({setup(n){const i=j(),{toEdit:o,toDelete:u}=J(i),{isLoading:v}=ne(i.getComplexities()),C=M({get(){return!!Object.keys(o.value).length},set(d){d||(o.value={})}}),h=M({get(){return!!Object.keys(u.value).length},set(d){d||(u.value={})}}),y=D(!1);async function m(d){y.value=!0,await i.deleteComplexity(d.id),u.value={},y.value=!1}return D([{text:"2 New Complexity",disabled:!0,href:"#"}]),(d,s)=>(x(),N("div",null,[p("div",Ve,[e(S,null,{default:t(()=>[e(f,null,{default:t(()=>[be]),_:1}),e(f,{class:"text-right"},{default:t(()=>[e(I,{width:"auto"},{activator:t(({props:a})=>[e(b,F({flat:"",color:"primary"},a),{default:t(()=>[Ce]),_:2},1040)]),default:t(({isActive:a})=>[e(z,{width:"400"},{default:t(()=>[e(R,null,{default:t(()=>[he]),_:1}),e(G,null,{default:t(()=>[e(_e,{onAdd:r=>a.value=!1,onCancel:r=>a.value=!1},null,8,["onAdd","onCancel"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1})]),_:1})]),l(v)?(x(),A(ue,{key:0,width:3,color:"primary",indeterminate:""})):(x(),N(U,{key:1},[e(fe),e(I,{modelValue:l(C),"onUpdate:modelValue":s[0]||(s[0]=a=>k(C)?C.value=a:null),width:"auto"},{default:t(({isActive:a})=>[e(z,{width:"400"},{default:t(()=>[e(R,null,{default:t(()=>[ge]),_:1}),e(G,null,{default:t(()=>[e(ye,{complexity:l(o),onCancel:r=>a.value=!1,onEdit:r=>a.value=!1},null,8,["complexity","onCancel","onEdit"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]),e(I,{modelValue:l(h),"onUpdate:modelValue":s[2]||(s[2]=a=>k(h)?h.value=a:null),width:"auto"},{default:t(({isActive:a})=>[e(z,{"prepend-icon":l(H),title:"Você tem certeza que deseja deletar esta complexidade?"},{actions:t(()=>[e(de),e(b,{onClick:r=>a.value=!1},{default:t(()=>[ke]),_:2},1032,["onClick"]),e(b,{onClick:s[1]||(s[1]=r=>m(l(u))),variant:"tonal",color:"error",loading:y.value},{default:t(()=>[Se]),_:1},8,["loading"])]),_:2},1032,["prepend-icon"])]),_:1},8,["modelValue"])],64))]))}});export{Ae as default};
