import{a6 as c,a7 as a}from"./index-b8e79387.js";const p=c("tasks",{state:()=>({tasks:[],priori:[],complexity:[],users:[],taskStatus:[],toEdit:{},toShow:{},toDelete:{},toShowChat:{},toAddChat:{},taskFiles:[],search:"",taskStatistics:{}}),actions:{async getTasks(t=""){try{const s=await a.get("api/tasks",{params:{search:t}});this.tasks=s.data.data}catch(s){console.error("Error fetching tasks:",s)}},async getPriorities(){try{const t=await a.get("api/priorities");this.priori=t.data.data}catch(t){console.error("Error fetching priorities:",t)}},async getComplexities(){try{const t=await a.get("api/complexities");this.complexity=t.data.data}catch(t){console.error("Error fetching complexities:",t)}},async getUsers(){try{const t=await a.get("api/users");this.users=t.data.data}catch(t){console.error("Error fetching users:",t)}},async getTasksStatus(){try{const t=await a.get("api/tasks-status");this.taskStatus=t.data.data}catch(t){console.error("Error fetching task statuses:",t)}},async storeTask(t,s){try{const e=(await a.post("api/tasks",t)).data;if(await this.getTasks(),console.log("task",e),s&&s.length>0){const o=new FormData;o.append("task_id",e.id);for(const i of s)o.append("files[]",i);await this.uploadTaskFile(o)}return e}catch(r){console.error("Error storing task:",r)}},async updateTask(t,s){try{const e=(await a.put(`api/tasks/${t}`,s)).data.data,o=this.tasks.findIndex(i=>i.id===t);this.tasks.splice(o,1,e),await this.getTasks()}catch(r){console.error("Error updating task:",r)}},async deleteTask(t){try{await a.delete(`api/tasks/${t}`);const s=this.tasks.findIndex(r=>r.id===t);this.tasks.splice(s,1)}catch(s){console.error("Error deleting task:",s)}},async uploadTaskFile(t){console.log("upload",t);try{return(await a.post("api/task-file",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw console.error("Error uploading task file:",s),s}},async getTaskFiles(t){try{const s=await a.get(`api/task-file/${t}`);this.taskFiles=s.data.data}catch(s){console.error("Error fetching task files:",s)}},async deleteTaskFile(t){try{await a.delete(`api/task-file/${t}`);const s=this.taskFiles.findIndex(r=>r.id===t);s!==-1&&this.taskFiles.splice(s,1)}catch(s){console.error("Error deleting task file:",s)}},async fetchTaskStatistics(){try{const t=await a.get("api/tasks/statistics");this.taskStatistics=t.data}catch(t){console.error("Error fetching task statistics:",t)}}}});export{p as u};
