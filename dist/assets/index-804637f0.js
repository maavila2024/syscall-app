import{F as we,E as ml,i as cl,j as Qe,N as vl,k as pl,l as _l}from"./vue-tabler-icons.es-1b1a27f5.js";import{u as Oe,a3 as $e,B as Q,L as u,o as _,c as q,a as i,b as e,w as l,e as X,d as A,t as G,ao as je,l as te,V as T,y as t,ap as N,m as ge,aq as Ce,I as ke,F as Ue,q as Ie,i as fl,ar as bl,z as ve,M as Be,N as Le,p as ie,as as Ge,a8 as yl,O as Ke,P as We,a4 as Vl,a9 as Re,at as ee,aa as Z,al as Xe,au as Ye,av as Ze,Q as re,ab as el,a0 as Te,a5 as V,_ as n,ad as C,ac as Y,aw as le,ax as ll,S as Ne,ae as Ee,ay as qe,am as tl,az as Pe,a6 as gl,a7 as De,r as kl,ai as pe,aj as ne,ah as se,G as hl,j as xl,aA as Me,ag as de,af as Se,T as wl,ak as Cl}from"./index-2bf573a2.js";import{u as he}from"./tasks-d1f9b022.js";import{_ as ze}from"./_plugin-vue_export-helper-c27b6911.js";import{a as y,u as Je}from"./vee-validate.esm-bd63cf86.js";const _e=I=>(Ke("data-v-98e83d01"),I=I(),We(),I),Sl={class:"tasks-table-container"},$l={class:"table-wrapper"},Ul=A(" Chamado "),Tl=A(" Título "),Al=A(" Descrição "),Il={class:"text-left",style:{width:"100px"}},Ml=A(" Solicitante "),Fl={class:"text-left",style:{width:"100px"}},jl=A(" Responsável "),ql={class:"text-left",style:{width:"120px"}},Pl=A(" Status "),Dl={class:"text-left",style:{width:"120px"}},Ol=A(" Prioridade "),Rl={class:"text-left",style:{width:"150px"}},Nl=A(" Complexidade "),El=_e(()=>i("th",{class:"text-left",style:{width:"100px"}},"Ações",-1)),zl=_e(()=>i("th",null,null,-1)),Jl={key:0},Bl=_e(()=>i("td",null,null,-1)),Ll=_e(()=>i("td",null,null,-1)),Gl=_e(()=>i("td",null,null,-1)),Hl={key:0},Ql={key:1},Kl={key:2},Wl={key:3},Xl={key:4},Yl={key:5},Zl={key:6},et={key:7},lt={key:8},tt={key:9},at=_e(()=>i("td",null,null,-1)),st=_e(()=>i("td",null,null,-1)),ot={class:"text-clamp"},nt=A(" Default "),ut={class:"text-clamp"},it={class:"text-clamp"},dt={class:"text-clamp"},rt={class:"text-right"},mt={class:"d-flex align-center"},ct={class:"text-clamp"},vt={class:"text-right"},pt={class:"d-flex align-center"},_t={class:"text-clamp"},ft={class:"text-right"},bt={class:"d-flex align-center"},yt={setup(I){const M=Oe(),o=he(),{tasks:m,toShow:K,toEdit:P,toDelete:D,taskFiles:f}=$e(o),O=Q(()=>M.user.teams.some(w=>w.is_admin)),h=u([]),S=u([]),$=u([]),z=u([]),F=u([]),x=u(!1),E=u(!1),J=u(!1),B=u(!1),L=u(!1),U=Q(()=>[...new Set(m.value.map(w=>w.task_status.name))]),g=Q(()=>[...new Set(m.value.map(w=>w.user_owner.first_name))]),j=Q(()=>[...new Set(m.value.map(w=>{var c;return((c=w.user_responsible)==null?void 0:c.first_name)||"Nenhum responsável"}))]),k=Q(()=>[...new Set(m.value.map(w=>w.priority.name))]),R=Q(()=>[...new Set(m.value.map(w=>w.complexity.name))]),b=u(!1),s=u(!1),a=u(!1),v=u(!1),oe=u(!1),fe=()=>{b.value=h.value.length===U.value.length},be=()=>{s.value=S.value.length===g.value.length},xe=()=>{a.value=$.value.length===j.value.length},ye=()=>{v.value=z.value.length===k.value.length},Ae=()=>{oe.value=F.value.length===R.value.length},H=()=>{b.value?h.value=[]:h.value=[...U.value]},r=()=>{s.value?S.value=[]:S.value=[...g.value]},p=()=>{a.value?$.value=[]:$.value=[...j.value]},nl=()=>{v.value?z.value=[]:z.value=[...k.value]},ul=()=>{oe.value?F.value=[]:F.value=[...R.value]},me=u(""),ue=u("asc"),Fe=w=>{me.value===w?ue.value=ue.value==="asc"?"desc":"asc":(me.value=w,ue.value="asc")},il=Q(()=>{const w=[...m.value];return w.sort((c,d)=>{const Ve=c[me.value],ce=d[me.value];return Ve<ce?ue.value==="asc"?-1:1:Ve>ce?ue.value==="asc"?1:-1:0}),w}),dl=Q(()=>m.value?il.value.filter(w=>{var ae;const c=h.value.length===0||h.value.includes(w.task_status.name),d=S.value.length===0||S.value.includes(w.user_owner.first_name),Ve=$.value.length===0||$.value.includes(((ae=w.user_responsible)==null?void 0:ae.first_name)||"Nenhum responsável"),ce=z.value.length===0||z.value.includes(w.priority.name),W=F.value.length===0||F.value.includes(w.complexity.name);return c&&d&&Ve&&ce&&W}):[]),rl=w=>({color:w.color});return(w,c)=>(_(),q("div",Sl,[i("div",$l,[e(yl,{class:"border-opacity-100"},{default:l(()=>[i("thead",null,[i("tr",null,[i("th",{class:"text-left",style:{width:"50px"},onClick:c[0]||(c[0]=d=>Fe("task_code"))},[Ul,me.value==="task_code"?(_(),X(je,{key:0},{default:l(()=>[A(G(ue.value==="asc"?"mdi-arrow-up":"mdi-arrow-down"),1)]),_:1})):te("",!0)]),i("th",{class:"text-left",style:{width:"50px"},onClick:c[1]||(c[1]=d=>Fe("name"))},[Tl,me.value==="name"?(_(),X(je,{key:0},{default:l(()=>[A(G(ue.value==="asc"?"mdi-arrow-up":"mdi-arrow-down"),1)]),_:1})):te("",!0)]),i("th",{class:"text-left",style:{width:"150px"},onClick:c[2]||(c[2]=d=>Fe("description"))},[Al,me.value==="description"?(_(),X(je,{key:0},{default:l(()=>[A(G(ue.value==="asc"?"mdi-arrow-up":"mdi-arrow-down"),1)]),_:1})):te("",!0)]),i("th",Il,[Ml,e(T,{icon:"",onClick:c[3]||(c[3]=d=>E.value=!E.value)},{default:l(()=>[e(t(we))]),_:1})]),i("th",Fl,[jl,e(T,{icon:"",onClick:c[4]||(c[4]=d=>J.value=!J.value)},{default:l(()=>[e(t(we))]),_:1})]),i("th",ql,[Pl,e(T,{icon:"",onClick:c[5]||(c[5]=d=>x.value=!x.value)},{default:l(()=>[e(t(we))]),_:1})]),i("th",Dl,[Ol,e(T,{icon:"",onClick:c[6]||(c[6]=d=>B.value=!B.value)},{default:l(()=>[e(t(we))]),_:1})]),i("th",Rl,[Nl,e(T,{icon:"",onClick:c[7]||(c[7]=d=>L.value=!L.value)},{default:l(()=>[e(t(we))]),_:1})]),El,zl])]),i("tbody",null,[E.value||J.value||x.value||B.value||L.value?(_(),q("tr",Jl,[Bl,Ll,Gl,E.value?(_(),q("td",Hl,[e(N,{modelValue:S.value,"onUpdate:modelValue":c[9]||(c[9]=d=>S.value=d),items:t(g),label:"Filtro Solicitante",multiple:"",onChange:be},{"prepend-item":l(()=>[e(ge,null,{default:l(()=>[e(Ce,{modelValue:s.value,"onUpdate:modelValue":c[8]||(c[8]=d=>s.value=d),label:s.value?"Desmarcar todos":"Selecionar todos",onChange:r},null,8,["modelValue","label"])]),_:1}),e(ke)]),_:1},8,["modelValue","items"])])):(_(),q("td",Ql)),J.value?(_(),q("td",Kl,[e(N,{modelValue:$.value,"onUpdate:modelValue":c[11]||(c[11]=d=>$.value=d),items:t(j),label:"Filtro Responsável",multiple:"",onChange:xe},{"prepend-item":l(()=>[e(ge,null,{default:l(()=>[e(Ce,{modelValue:a.value,"onUpdate:modelValue":c[10]||(c[10]=d=>a.value=d),label:a.value?"Desmarcar todos":"Selecionar todos",onChange:p},null,8,["modelValue","label"])]),_:1}),e(ke)]),_:1},8,["modelValue","items"])])):(_(),q("td",Wl)),x.value?(_(),q("td",Xl,[e(N,{modelValue:h.value,"onUpdate:modelValue":c[13]||(c[13]=d=>h.value=d),items:t(U),label:"Filtro Status",multiple:"",onChange:fe},{"prepend-item":l(()=>[e(ge,null,{default:l(()=>[e(Ce,{modelValue:b.value,"onUpdate:modelValue":c[12]||(c[12]=d=>b.value=d),label:b.value?"Desmarcar todos":"Selecionar todos",onChange:H},null,8,["modelValue","label"])]),_:1}),e(ke)]),_:1},8,["modelValue","items"])])):(_(),q("td",Yl)),B.value?(_(),q("td",Zl,[e(N,{modelValue:z.value,"onUpdate:modelValue":c[15]||(c[15]=d=>z.value=d),items:t(k),label:"Filtro Prioridade",multiple:"",onChange:ye},{"prepend-item":l(()=>[e(ge,null,{default:l(()=>[e(Ce,{modelValue:v.value,"onUpdate:modelValue":c[14]||(c[14]=d=>v.value=d),label:v.value?"Desmarcar todos":"Selecionar todos",onChange:nl},null,8,["modelValue","label"])]),_:1}),e(ke)]),_:1},8,["modelValue","items"])])):(_(),q("td",et)),L.value?(_(),q("td",lt,[e(N,{modelValue:F.value,"onUpdate:modelValue":c[17]||(c[17]=d=>F.value=d),items:t(R),label:"Filtro Complexidade",multiple:"",onChange:Ae},{"prepend-item":l(()=>[e(ge,null,{default:l(()=>[e(Ce,{modelValue:oe.value,"onUpdate:modelValue":c[16]||(c[16]=d=>oe.value=d),label:oe.value?"Desmarcar todos":"Selecionar todos",onChange:ul},null,8,["modelValue","label"])]),_:1}),e(ke)]),_:1},8,["modelValue","items"])])):(_(),q("td",tt)),at,st])):te("",!0),(_(!0),q(Ue,null,Ie(t(dl),(d,Ve)=>{var ce;return _(),q("tr",{key:Ve},[i("td",null,G(d.task_code),1),i("td",null,[i("div",ot,G(d.name),1),d.default?(_(),X(fl,{key:0,size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:l(()=>[nt]),_:1})):te("",!0)]),i("td",null,[i("div",ut,G(d.description),1)]),i("td",null,[i("div",it,G(d.user_owner.first_name),1)]),i("td",null,[i("div",dt,G(((ce=d.user_responsible)==null?void 0:ce.first_name)||"Nenhum responsável"),1)]),i("td",null,[i("div",{class:"text-clamp",style:bl(rl(d.task_status))},G(d.task_status.name),5)]),i("td",rt,[i("div",mt,[e(ve,{text:d.priority_justification},{activator:l(({props:W})=>[e(T,Be(Le(W)),{default:l(()=>[i("span",ie(w.attrs,Ge(w.on)),[i("div",ct,G(d.priority.name),1)],16)]),_:2},1040)]),_:2},1032,["text"])])]),i("td",vt,[i("div",pt,[e(ve,{text:d.complexity_justification||"Aguardando análise"},{activator:l(({props:W})=>[e(T,Be(Le(W)),{default:l(()=>{var ae;return[i("span",ie(w.attrs,Ge(w.on)),[i("div",_t,G(((ae=d.complexity)==null?void 0:ae.name)||"Aguardando análise"),1)],16)]}),_:2},1040)]),_:2},1032,["text"])])]),i("td",ft,[i("div",bt,[e(ve,{text:"Visualizar Chamado"},{activator:l(({props:W})=>[e(T,ie({icon:"",flat:"",onClick:ae=>K.value=d},W),{default:l(()=>[e(t(ml),{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024),t(O)?(_(),X(ve,{key:0,text:"Editar Chamado"},{activator:l(({props:W})=>[e(T,ie({icon:"",flat:"",onClick:ae=>P.value=d},W),{default:l(()=>[e(t(cl),{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024)):te("",!0),t(O)?(_(),X(ve,{key:1,text:"Deletar Chamado"},{activator:l(({props:W})=>[e(T,ie({icon:"",flat:"",onClick:ae=>D.value=d},W),{default:l(()=>[e(t(Qe),{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024)):te("",!0),e(ve,{text:"Consultar Notas de Trabalho"},{activator:l(({props:W})=>[e(T,ie({icon:"",flat:"",onClick:ae=>w.$emit("openChat",d)},W),{default:l(()=>[e(t(vl),{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024),e(ve,{text:"Anexos"},{activator:l(({props:W})=>[e(T,ie({icon:"",flat:"",onClick:ae=>w.$emit("openAttachments",d)},W),{default:l(()=>[e(t(pl),{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024)])])])}),128))])]),_:1})])]))}},Vt=ze(yt,[["__scopeId","data-v-98e83d01"]]),gt={emits:["cancel","add"],setup(I,{emit:M}){const o=Oe(),m=he();u([]);const K=[{label:"Grãos",value:1},{label:"Proteína",value:2}],P=[{label:"Algo que funcionava, parou de funcionar?",value:1},{label:"Fazer uma solicitação, algo novo (melhoria)?",value:2}],D=Q(()=>{var s;return((s=m.priori.find(a=>a.is_default))==null?void 0:s.id)||null}),f=Q(()=>{var s;return((s=m.taskStatus.find(a=>a.is_default))==null?void 0:s.id)||null}),{value:O}=y("segment",2),{value:h}=y("priority_id"),{value:S}=y("task_status_id");Vl(()=>{D.value&&!h.value&&(h.value=D.value),f.value&&!S.value&&(S.value=f.value)});const $=Q(()=>{const s=m.priori.find(a=>a.id===h.value);return s&&s.justify}),z=Q(()=>Re({segment:ee().required().label("Segmento"),task_type:ee().required().label("Tipo de chamado"),name:Z().required().label("Título"),system_screen:Z().required().label("Tela"),description:Z().required().label("Descrição"),owner_id:ee().required().label("Solicitante"),task_status_id:ee().required().label("Status do Chamado"),priority_id:ee().required().label("Prioridade"),observation:Z().nullable().label("Observação"),priority_justification:$.value?Z().required().label("Justificativa da Prioridade"):Z().label("Justificativa da Prioridade"),status:Xe().required().label("Status"),files:Ye().of(Ze()).nullable()})),{handleSubmit:F,errors:x,isSubmitting:E}=Je({validationSchema:z,initialValues:{segment:1,task_type:"",name:"",system_screen:"",description:"",owner_id:o.user.id,responsible_id:"",task_status_id:f.value,priority_id:D.value,observation:"",created_at:"",expected_date:"",finish_date:"",priority_justification:"",status:!0,files:[]}}),J=F(async s=>{console.log("values",s);try{const a=b.value,v=await m.storeTask(s,a);M("add")}catch(a){console.error("Erro ao adicionar comentário ou fazer upload dos arquivos:",a)}}),B=u(""),{value:L}=y("name"),{value:U}=y("task_type"),{value:g}=y("system_screen"),{value:j}=y("description");y("owner_id"),y("responsible_id");const{value:k}=y("observation");y("created_at"),y("expected_date"),y("finish_date");const{value:R}=y("priority_justification");y("status");const{value:b}=y("files");return re(D,s=>{s&&!h.value&&(h.value=s)}),re(f,s=>{s&&!S.value&&(S.value=s)}),re(h,()=>{$.value||(R.value="")}),(s,a)=>(_(),q("div",null,[B.value?(_(),X(el,{key:0,color:"error",class:"mb-2"},{default:l(()=>[A(G(B.value),1)]),_:1})):te("",!0),e(Ee,{onSubmit:Ne(t(J),["prevent"])},{default:l(()=>[e(Te,null,{default:l(()=>[e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:t(O),"onUpdate:modelValue":a[0]||(a[0]=v=>C(O)?O.value=v:null),"error-messages":t(x).segment,items:K,label:"Segmento","item-title":"label","item-value":"value"},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:t(U),"onUpdate:modelValue":a[1]||(a[1]=v=>C(U)?U.value=v:null),"error-messages":t(x).task_type,items:P,label:"Tipo de chamado","item-title":"label","item-value":"value"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(Y,{modelValue:t(L),"onUpdate:modelValue":a[2]||(a[2]=v=>C(L)?L.value=v:null),"error-messages":t(x).name,label:"Título",variant:"outlined",color:"primary",maxlength:"60",counter:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(Y,{modelValue:t(g),"onUpdate:modelValue":a[3]||(a[3]=v=>C(g)?g.value=v:null),"error-messages":t(x).system_screen,label:"Tela",variant:"outlined",color:"primary",maxlength:"60",counter:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(le,{modelValue:t(j),"onUpdate:modelValue":a[4]||(a[4]=v=>C(j)?j.value=v:null),"error-messages":t(x).description,label:"Descrição",variant:"outlined",color:"primary",rows:"5",maxlength:"500",counter:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(le,{modelValue:t(k),"onUpdate:modelValue":a[5]||(a[5]=v=>C(k)?k.value=v:null),"error-messages":t(x).observation,label:"Observação",variant:"outlined",color:"primary",rows:"5",maxlength:"500",counter:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"12",md:"12"},{default:l(()=>[e(N,{modelValue:t(h),"onUpdate:modelValue":a[6]||(a[6]=v=>C(h)?h.value=v:null),"error-messages":t(x).priority_id,items:t(m).priori,label:"Prioridade","item-title":"name","item-value":"id"},null,8,["modelValue","error-messages","items"])]),_:1})]),_:1}),t($)?(_(),X(V,{key:0},{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(le,{modelValue:t(R),"onUpdate:modelValue":a[7]||(a[7]=v=>C(R)?R.value=v:null),"error-messages":t(x).priority_justification,label:"Justificativa da Prioridade",variant:"outlined",color:"primary",rows:"5",maxlength:"500",counter:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})):te("",!0),e(V,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(ll,{modelValue:t(b),"onUpdate:modelValue":a[8]||(a[8]=v=>C(b)?b.value=v:null),label:"Anexos do chamado",multiple:"","error-messages":t(x).files,"show-size":""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,{justify:"end"},{default:l(()=>[e(n,{cols:"12",md:"auto"},{default:l(()=>[e(T,{flat:"",text:"Cancelar",onClick:a[9]||(a[9]=v=>M("cancel"))})]),_:1}),e(n,{cols:"12",md:"auto"},{default:l(()=>[e(T,{type:"submit",color:"primary",flat:"",loading:t(E),text:"Adicionar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]))}},kt={props:{task:{type:Object,required:!0}},emits:["cancel","edit"],setup(I,{emit:M}){const o=I,m=he(),K=[{label:"Grãos",value:1},{label:"Proteína",value:2}],P=[{label:"Algo que funcionava, parou de funcionar?",value:1},{label:"Fazer uma solicitação, algo novo (melhoria)?",value:2}],{handleSubmit:D,errors:f,isSubmitting:O,setFieldValue:h,setErrors:S}=Je({validationSchema:Re({segment:ee().required().label("Segmento"),task_type:ee().required().label("Tipo de chamado"),task_code:Z().required().label("Número do chamado"),name:Z().required().label("Título"),system_screen:Z().required().label("Tela"),description:Z().required().label("Descrição"),owner_id:ee().required().label("Solicitante"),responsible_id:ee().required().label("Responsável"),task_status_id:ee().required().label("Status do Chamado"),priority_id:ee().required().label("Prioridade do Chamado"),complexity_id:ee().required().label("Complexidade do Chamado"),observation:Z().nullable().label("Observação"),created_at:qe().nullable().label("Data de Criação"),expected_date:qe().nullable().label("Data de Criação").transform((H,r)=>r===""?null:H),finish_date:qe().nullable().label("Data de Conclusão").transform((H,r)=>r===""?null:H),priority_justification:Z().nullable().label("Justificativa da Prioridade"),complexity_justification:Z().nullable().label("Justificativa da Complexidade"),status:Xe().required().label("Status")}),initialValues:{segment:o.task.segment,task_type:o.task.task_type,task_code:o.task.task_code,name:o.task.name,description:o.task.description,owner_id:o.task.owner_id,responsible_id:o.task.responsible_id,task_status_id:o.task.task_status_id,system_screen:o.task.system_screen,observation:o.task.observation,priority_id:o.task.priority_id,complexity_id:o.task.complexity_id,priority_justification:o.task.priority_justification,complexity_justification:o.task.complexity_justification,finish_date:o.task.finish_date?o.task.finish_date.split("T")[0]:null,expected_date:o.task.expected_date?o.task.expected_date.split("T")[0]:null,created_at:o.task.created_at?o.task.created_at.split("T")[0]:null,status:o.task.status}}),$={complexityRef:u(null),complexityJustificationRef:u(null),responsibleRef:u(null)},z=()=>{f.responsible_id?Pe(()=>{$.responsibleRef.value.focus(),$.responsibleRef.value.$el.scrollIntoView({behavior:"smooth",block:"center"})}):f.complexity_id?Pe(()=>{$.complexityRef.value.focus(),$.complexityRef.value.$el.scrollIntoView({behavior:"smooth",block:"center"})}):f.complexity_justification&&Pe(()=>{$.complexityJustificationRef.value.focus(),$.complexityJustificationRef.value.$el.scrollIntoView({behavior:"smooth",block:"center"})})};re(f,H=>{console.log(f),z()});const F=D(async H=>{Ae.value||delete H.priority_justification,fe.value||(H.expected_date=null),be.value||(H.finish_date=null),console.log("Payload being sent to the backend:",H),await m.updateTask(o.task.id,H),M("edit")}),x=u(""),{value:E}=y("segment"),{value:J}=y("priority_id"),{value:B}=y("complexity_id"),{value:L}=y("name"),{value:U}=y("task_code"),{value:g}=y("task_type"),{value:j}=y("description"),{value:k}=y("owner_id"),{value:R}=y("responsible_id"),{value:b}=y("task_status_id"),{value:s}=y("system_screen"),{value:a}=y("observation"),{value:v}=y("priority_justification"),{value:oe}=y("complexity_justification"),{value:fe}=y("expected_date"),{value:be}=y("finish_date"),{value:xe}=y("created_at"),{value:ye}=y("status"),Ae=Q(()=>{const H=m.priori.find(r=>r.id===J.value);return H&&H.is_justify});return re(J,H=>{Ae.value?h("priority_justification",v.value||""):(v.value="",S({priority_justification:void 0}))}),(H,r)=>(_(),q("div",null,[x.value?(_(),X(el,{key:0,color:"error",class:"mb-2"},{default:l(()=>[A(G(x.value),1)]),_:1})):te("",!0),e(Ee,{onSubmit:Ne(t(F),["prevent"])},{default:l(()=>[e(Te,null,{default:l(()=>[e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:t(E),"onUpdate:modelValue":r[0]||(r[0]=p=>C(E)?E.value=p:null),"error-messages":t(f).segment,items:K,label:"Segmento","item-title":"label","item-value":"value"},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:t(g),"onUpdate:modelValue":r[1]||(r[1]=p=>C(g)?g.value=p:null),"error-messages":t(f).task_type,items:P,label:"Tipo de chamado","item-title":"label","item-value":"value"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(Y,{modelValue:t(U),"onUpdate:modelValue":r[2]||(r[2]=p=>C(U)?U.value=p:null),"error-messages":t(f).task_code,label:"Número do chamado",variant:"outlined",color:"primary",disabled:""},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(Y,{modelValue:t(L),"onUpdate:modelValue":r[3]||(r[3]=p=>C(L)?L.value=p:null),"error-messages":t(f).name,label:"Título",variant:"outlined",color:"primary",maxlength:"60",counter:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(Y,{modelValue:t(s),"onUpdate:modelValue":r[4]||(r[4]=p=>C(s)?s.value=p:null),"error-messages":t(f).system_screen,label:"Tela",variant:"outlined",color:"primary",maxlength:"60",counter:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(le,{modelValue:t(j),"onUpdate:modelValue":r[5]||(r[5]=p=>C(j)?j.value=p:null),"error-messages":t(f).description,label:"Descrição",variant:"outlined",color:"primary",rows:"5",maxlength:"500",counter:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:t(k),"onUpdate:modelValue":r[6]||(r[6]=p=>C(k)?k.value=p:null),"error-messages":t(f).owner_id,items:t(m).users,label:"Solicitante","item-title":"first_name","item-value":"id",disabled:""},null,8,["modelValue","error-messages","items"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(Y,{modelValue:t(xe),"onUpdate:modelValue":r[7]||(r[7]=p=>C(xe)?xe.value=p:null),"error-messages":t(f).created_at,label:"Data de Criação",variant:"outlined",type:"date",disabled:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:t(b),"onUpdate:modelValue":r[8]||(r[8]=p=>C(b)?b.value=p:null),"error-messages":t(f).task_status_id,items:t(m).taskStatus,label:"Status do Chamado","item-title":"name","item-value":"id"},null,8,["modelValue","error-messages","items"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:t(R),"onUpdate:modelValue":r[9]||(r[9]=p=>C(R)?R.value=p:null),"error-messages":t(f).responsible_id,items:t(m).users,label:"Responsável","item-title":"first_name","item-value":"id",ref:"responsibleRef"},null,8,["modelValue","error-messages","items"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(le,{modelValue:t(a),"onUpdate:modelValue":r[10]||(r[10]=p=>C(a)?a.value=p:null),"error-messages":t(f).observation,label:"Observação",variant:"outlined",color:"primary",rows:"5",maxlength:"500",counter:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(Y,{modelValue:t(fe),"onUpdate:modelValue":r[11]||(r[11]=p=>C(fe)?fe.value=p:null),"error-messages":t(f).expected_date,label:"Data Esperada",variant:"outlined",type:"date"},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(Y,{modelValue:t(be),"onUpdate:modelValue":r[12]||(r[12]=p=>C(be)?be.value=p:null),"error-messages":t(f).finish_date,label:"Data de Conclusão",variant:"outlined",type:"date"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:t(J),"onUpdate:modelValue":r[13]||(r[13]=p=>C(J)?J.value=p:null),"error-messages":t(f).priority_id,items:t(m).priori,label:"Prioridade","item-title":"name","item-value":"id"},null,8,["modelValue","error-messages","items"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(le,{modelValue:t(v),"onUpdate:modelValue":r[14]||(r[14]=p=>C(v)?v.value=p:null),"error-messages":t(f).priority_justification,label:"Justificativa da Prioridade",variant:"outlined",color:"primary",rows:"5",maxlength:"500",counter:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:t(B),"onUpdate:modelValue":r[15]||(r[15]=p=>C(B)?B.value=p:null),"error-messages":t(f).complexity_id,items:t(m).complexity,label:"Complexidade do Chamado","item-title":"name","item-value":"id",ref:"complexityRef"},null,8,["modelValue","error-messages","items"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(le,{modelValue:t(oe),"onUpdate:modelValue":r[16]||(r[16]=p=>C(oe)?oe.value=p:null),"error-messages":t(f).complexity_justification,label:"Justificativa da Complexidade",variant:"outlined",color:"primary",rows:"5",ref:"complexityJustificationRef",maxlength:"500",counter:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(tl,{modelValue:t(ye),"onUpdate:modelValue":r[17]||(r[17]=p=>C(ye)?ye.value=p:null),label:t(ye)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(V,{justify:"end"},{default:l(()=>[e(n,{cols:"12",md:"auto"},{default:l(()=>[e(T,{flat:"",text:"Cancelar",onClick:r[18]||(r[18]=p=>M("cancel"))})]),_:1}),e(n,{cols:"12",md:"auto"},{default:l(()=>[e(T,{type:"submit",color:"primary",flat:"",loading:t(O),text:"Editar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]))}};const ht={props:{task:{type:Object,required:!0}},emits:["cancel"],setup(I,{emit:M}){const o=I,m=he(),K=[{label:"Grãos",value:1},{label:"Proteína",value:2}],P=[{label:"Algo que funcionava, parou de funcionar!",value:1},{label:"Fazer uma solicitação, algo novo (melhoria)!",value:2}],D=u(o.task.segment),f=u(o.task.task_type),O=u(o.task.task_code),h=u(o.task.name),S=u(o.task.description),$=u(o.task.owner_id),z=u(o.task.responsible_id),F=u(o.task.task_status_id),x=u(o.task.system_screen),E=u(o.task.observation),J=u(o.task.priority_id),B=u(o.task.complexity_id),L=u(o.task.priority_justification),U=u(o.task.complexity_justification),g=u(o.task.finish_date?o.task.finish_date.split("T")[0]:null),j=u(o.task.expected_date?o.task.expected_date.split("T")[0]:null),k=u(o.task.created_at?o.task.created_at.split("T")[0]:null),R=u(o.task.status);return(b,s)=>(_(),q("div",null,[e(Te,null,{default:l(()=>[e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:D.value,"onUpdate:modelValue":s[0]||(s[0]=a=>D.value=a),items:K,label:"Segmento","item-title":"label","item-value":"value",disabled:"",class:"custom-label"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=a=>f.value=a),items:P,label:"Tipo de chamado","item-title":"label","item-value":"value",disabled:"",class:"custom-label"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(Y,{modelValue:O.value,"onUpdate:modelValue":s[2]||(s[2]=a=>O.value=a),label:"Número do chamado",variant:"outlined",color:"primary",disabled:"",class:"custom-label"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(Y,{modelValue:h.value,"onUpdate:modelValue":s[3]||(s[3]=a=>h.value=a),label:"Título",variant:"outlined",color:"primary",readonly:"",class:"custom-label",rows:"2",maxlength:"60"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(Y,{modelValue:x.value,"onUpdate:modelValue":s[4]||(s[4]=a=>x.value=a),label:"Tela",variant:"outlined",color:"primary",disabled:"",class:"custom-label"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(le,{modelValue:S.value,"onUpdate:modelValue":s[5]||(s[5]=a=>S.value=a),label:"Descrição",variant:"outlined",color:"primary",rows:"5",readonly:"",class:"custom-label",maxlength:"150",counter:""},null,8,["modelValue"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:$.value,"onUpdate:modelValue":s[6]||(s[6]=a=>$.value=a),items:t(m).users,label:"Solicitante","item-title":"first_name","item-value":"id",disabled:"",class:"custom-label"},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(Y,{modelValue:k.value,"onUpdate:modelValue":s[7]||(s[7]=a=>k.value=a),label:"Data de Criação",variant:"outlined",type:"date",disabled:"",class:"custom-label"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:F.value,"onUpdate:modelValue":s[8]||(s[8]=a=>F.value=a),items:t(m).taskStatus,label:"Status do Chamado","item-title":"name","item-value":"id",disabled:"",class:"custom-label"},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:z.value,"onUpdate:modelValue":s[9]||(s[9]=a=>z.value=a),items:t(m).users,label:"Responsável","item-title":"first_name","item-value":"id",disabled:"",class:"custom-label"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(le,{modelValue:E.value,"onUpdate:modelValue":s[10]||(s[10]=a=>E.value=a),label:"Observação",variant:"outlined",color:"primary",rows:"5",readonly:"",class:"custom-label",maxlength:"500",counter:""},null,8,["modelValue"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(Y,{modelValue:j.value,"onUpdate:modelValue":s[11]||(s[11]=a=>j.value=a),label:"Data Esperada",variant:"outlined",type:"date",disabled:"",class:"custom-label"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(Y,{modelValue:g.value,"onUpdate:modelValue":s[12]||(s[12]=a=>g.value=a),label:"Data de Conclusão",variant:"outlined",type:"date",disabled:"",class:"custom-label"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:J.value,"onUpdate:modelValue":s[13]||(s[13]=a=>J.value=a),items:t(m).priori,label:"Prioridade","item-title":"name","item-value":"id",disabled:"",class:"custom-label"},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(le,{modelValue:L.value,"onUpdate:modelValue":s[14]||(s[14]=a=>L.value=a),label:"Justificativa da Prioridade",variant:"outlined",color:"primary",rows:"5",readonly:"",class:"custom-label",maxlength:"500",counter:""},null,8,["modelValue"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(N,{modelValue:B.value,"onUpdate:modelValue":s[15]||(s[15]=a=>B.value=a),items:t(m).complexity,label:"Complexidade do Chamado","item-title":"name","item-value":"id",disabled:"",class:"custom-label"},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(le,{modelValue:U.value,"onUpdate:modelValue":s[16]||(s[16]=a=>U.value=a),label:"Justificativa da Complexidade",variant:"outlined",color:"primary",rows:"5",readonly:"",class:"custom-label",maxlength:"500",counter:""},null,8,["modelValue"])]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(tl,{modelValue:R.value,"onUpdate:modelValue":s[17]||(s[17]=a=>R.value=a),label:R.value?"Ativo":"Inativo",color:"primary",inset:"",disabled:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(V,{justify:"end"},{default:l(()=>[e(n,{cols:"12",md:"auto"},{default:l(()=>[e(T,{flat:"",text:"Fechar",onClick:s[18]||(s[18]=a=>b.$emit("cancel"))})]),_:1})]),_:1})]),_:1})]))}},xt=ze(ht,[["__scopeId","data-v-068686dd"]]),al=gl("chats",{state:()=>({messages:[]}),actions:{async fetchMessages(I){try{const M=await De.get(`/api/interactions/${I}`);this.messages=M.data}catch(M){console.error("Error fetching messages:",M)}},async createInteraction(I,M,o){try{return(await De.post("/api/interactions",{task_id:I,comment:M,user_id:o})).data}catch(m){console.error("Error creating interaction:",m)}},async uploadFile(I){try{return(await De.post("/api/interaction-file",I,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(M){throw console.error("Error uploading file:",M),M}}}});function sl(I){return`https://syscall-api.devtest.com.br//storage/${I}`}const ol=I=>(Ke("data-v-4ff77f2d"),I=I(),We(),I),wt=ol(()=>i("span",{class:"text-h5"},"Notas de Trabalho",-1)),Ct={class:"comment-text"},St={key:0},$t=["href"],Ut={class:"text-right text-caption mt-2"},Tt={class:"email-text"},At=A(" - "),It={class:"email-text"},Mt=A("Adicionar Comentário"),Ft=A("Fechar"),jt=ol(()=>i("span",{class:"text-h5"},"Adicionar Comentário",-1)),qt=A("Cancelar"),Pt=A("Adicionar"),Dt={props:{taskId:{type:Number,required:!0},showChatModal:{type:Boolean,required:!0},userId:{type:Number,required:!0}},emits:["update:showChatModal"],setup(I,{emit:M}){const o=I,m=al(),{messages:K}=$e(m),P=u(!1),D=u(!1),f=Re({comment:Z().required().label("Comentário"),files:Ye().of(Ze()).nullable()}),{handleSubmit:O,errors:h,isSubmitting:S,resetForm:$}=Je({validationSchema:f,initialValues:{comment:"",files:[]}}),z=O(async U=>{try{const g=await m.createInteraction(o.taskId,U.comment,o.userId);if(U.files&&U.files.length>0){const j=new FormData;j.append("interaction_id",g.id);for(const k of U.files)j.append("files[]",k);await m.uploadFile(j)}await m.fetchMessages(o.taskId),D.value=!1,M("update:showChatModal",!1)}catch(g){console.error("Erro ao adicionar comentário ou fazer upload dos arquivos:",g)}}),{value:F}=y("comment"),{value:x}=y("files");re(()=>o.showChatModal,async U=>{U?(P.value=!0,await m.fetchMessages(o.taskId)):P.value=!1});const E=()=>{M("update:showChatModal",!1)},J=()=>{$(),D.value=!0},B=U=>{const g={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};return new Date(U).toLocaleDateString("pt-BR",g)},L=Q(()=>[...K.value].sort((U,g)=>g.id-U.id));return(U,g)=>{const j=kl("v-list-item-content");return _(),X(de,{modelValue:P.value,"onUpdate:modelValue":g[4]||(g[4]=k=>P.value=k),"max-width":"800px",persistent:""},{default:l(()=>[e(se,null,{default:l(()=>[e(pe,null,{default:l(()=>[wt]),_:1}),e(ne,null,{default:l(()=>[e(Te,null,{default:l(()=>[e(V,null,{default:l(()=>[(_(!0),q(Ue,null,Ie(t(L),(k,R)=>(_(),X(n,{key:R,cols:"12"},{default:l(()=>[e(se,{class:"mb-3"},{default:l(()=>[e(ne,null,{default:l(()=>[i("div",Ct,G(k.comment),1),k.interaction_files&&k.interaction_files.length?(_(),q("div",St,[e(ke),e(hl,null,{default:l(()=>[(_(!0),q(Ue,null,Ie(k.interaction_files,(b,s)=>(_(),X(ge,{key:s},{default:l(()=>[e(j,null,{default:l(()=>[e(xl,null,{default:l(()=>[i("a",{href:t(sl)(b.path),target:"_blank"},G(b.name),9,$t)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)])):te("",!0),i("div",Ut,[i("span",Tt,G(k.user_email),1),At,i("span",It,G(B(k.created_at)),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(Me,null,{default:l(()=>[e(T,{color:"primary",onClick:J},{default:l(()=>[Mt]),_:1}),e(T,{color:"secondary",onClick:E},{default:l(()=>[Ft]),_:1})]),_:1})]),_:1}),e(de,{modelValue:D.value,"onUpdate:modelValue":g[3]||(g[3]=k=>D.value=k),"max-width":"500px",persistent:""},{default:l(()=>[e(se,null,{default:l(()=>[e(pe,null,{default:l(()=>[jt]),_:1}),e(ne,null,{default:l(()=>[e(Ee,{onSubmit:Ne(t(z),["prevent"])},{default:l(()=>[e(le,{modelValue:t(F),"onUpdate:modelValue":g[0]||(g[0]=k=>C(F)?F.value=k:null),label:"Comentário","error-messages":t(h).comment},null,8,["modelValue","error-messages"]),e(ll,{modelValue:t(x),"onUpdate:modelValue":g[1]||(g[1]=k=>C(x)?x.value=k:null),label:"Selecionar Arquivos","error-messages":t(h).files,"show-size":"",multiple:""},null,8,["modelValue","error-messages"])]),_:1},8,["onSubmit"])]),_:1}),e(Me,null,{default:l(()=>[e(T,{color:"blue darken-1",text:"",onClick:g[2]||(g[2]=k=>D.value=!1)},{default:l(()=>[qt]),_:1}),e(T,{color:"blue darken-1",text:"",loading:t(S),onClick:t(z)},{default:l(()=>[Pt]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}},He=ze(Dt,[["__scopeId","data-v-4ff77f2d"]]),Ot=i("span",{class:"text-h5"},"Anexos do Chamado",-1),Rt=["href"],Nt=A("Fechar"),Et={props:{taskId:{type:Number,required:!0},showAttachmentsModal:{type:Boolean,required:!0}},emits:["update:showAttachmentsModal"],setup(I,{emit:M}){const o=I,m=he(),{taskFiles:K}=$e(m),P=u(!1);re(()=>o.showAttachmentsModal,async O=>{O?(await m.getTaskFiles(o.taskId),P.value=!0):P.value=!1});const D=()=>{M("update:showAttachmentsModal",!1)},f=async O=>{await m.deleteTaskFile(O),await m.getTaskFiles(o.taskId)};return(O,h)=>(_(),X(de,{modelValue:P.value,"onUpdate:modelValue":h[0]||(h[0]=S=>P.value=S),"max-width":"800px",persistent:""},{default:l(()=>[e(se,null,{default:l(()=>[e(pe,null,{default:l(()=>[Ot]),_:1}),e(ne,null,{default:l(()=>[e(Te,null,{default:l(()=>[e(V,null,{default:l(()=>[(_(!0),q(Ue,null,Ie(t(K),(S,$)=>(_(),X(n,{key:$,cols:"12"},{default:l(()=>[e(se,{class:"mb-3"},{default:l(()=>[e(ne,null,{default:l(()=>[i("a",{href:t(sl)(S.path),target:"_blank"},G(S.name),9,Rt),e(T,{icon:"",onClick:z=>f(S.id)},{default:l(()=>[e(t(_l))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(Me,null,{default:l(()=>[e(T,{color:"secondary",onClick:D},{default:l(()=>[Nt]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},zt={class:"mb-5 pb-5 border-b border-opacity-100"},Jt=A("Novo Chamado"),Bt=A("Adicionar chamado"),Lt=A("Visualizar chamado"),Gt=A("Editar chamado"),Ht=A("Cancelar"),Qt=A("Deletar"),Kt=i("span",{class:"text-h5"},"Adicionar Nota de Trabalho",-1),Wt=A("Cancelar"),Xt=A("Adicionar"),aa={setup(I){const M=Oe(),o=he(),{toShow:m,toEdit:K,toDelete:P}=$e(o),D=al();$e(D);const{isLoading:f}=Se(o.getTasks());Se(o.getPriorities()),Se(o.getComplexities()),Se(o.getTasksStatus()),Se(o.getUsers());const O=Q({get(){return!!Object.keys(K.value).length},set(b){b||(K.value={})}}),h=Q({get(){return!!Object.keys(m.value).length},set(b){b||(m.value={})}}),S=Q({get(){return!!Object.keys(P.value).length},set(b){b||(P.value={})}}),$=u(!1);async function z(b){$.value=!0,await o.deleteTask(b.id),P.value={},$.value=!1}const F=u(!1),x=u(null),E=u(!1),J=u(""),B=u(M.user.id),L=b=>{x.value=b.id,F.value=!0},U=b=>{x.value=b.id,E.value=!0},g=async()=>{await D.addMessage(x.value,J.value,B.value),J.value="",E.value=!1},j=u(!1),k=b=>{x.value=b.id,j.value=!0},R=u("");return re(R,b=>{o.getTasks(b)}),(b,s)=>(_(),q("div",null,[i("div",zt,[e(V,null,{default:l(()=>[e(n,{cols:"12",lg:"4",md:"6"},{default:l(()=>[e(Y,{density:"compact",modelValue:R.value,"onUpdate:modelValue":s[0]||(s[0]=a=>R.value=a),label:"Pesquisar Chamados","append-inner-icon":"mdi-magnify","hide-details":"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(n,{class:"text-right"},{default:l(()=>[e(de,{width:"800",persistent:""},{activator:l(({props:a})=>[e(T,ie({flat:"",color:"primary"},a),{default:l(()=>[Jt]),_:2},1040)]),default:l(({isActive:a})=>[e(se,{width:"800"},{default:l(()=>[e(pe,null,{default:l(()=>[Bt]),_:1}),e(ne,null,{default:l(()=>[e(gt,{onAdd:v=>a.value=!1,onCancel:v=>a.value=!1},null,8,["onAdd","onCancel"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1})]),_:1})]),t(f)?(_(),X(Cl,{key:0,width:3,color:"primary",indeterminate:""})):(_(),q(Ue,{key:1},[e(Vt,{onOpenChat:L,onAddNote:U,onOpenAttachments:k}),e(de,{modelValue:t(h),"onUpdate:modelValue":s[1]||(s[1]=a=>C(h)?h.value=a:null),width:"800",persistent:""},{default:l(({isActive:a})=>[e(se,{width:"800"},{default:l(()=>[e(pe,null,{default:l(()=>[Lt]),_:1}),e(ne,null,{default:l(()=>[e(xt,{task:t(m),onCancel:v=>a.value=!1,onShow:v=>a.value=!1},null,8,["task","onCancel","onShow"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]),e(de,{modelValue:t(O),"onUpdate:modelValue":s[2]||(s[2]=a=>C(O)?O.value=a:null),width:"800",persistent:""},{default:l(({isActive:a})=>[e(se,{width:"800"},{default:l(()=>[e(pe,null,{default:l(()=>[Gt]),_:1}),e(ne,null,{default:l(()=>[e(kt,{task:t(K),onCancel:v=>a.value=!1,onEdit:v=>a.value=!1},null,8,["task","onCancel","onEdit"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]),e(de,{modelValue:t(S),"onUpdate:modelValue":s[4]||(s[4]=a=>C(S)?S.value=a:null),width:"800",persistent:""},{default:l(({isActive:a})=>[e(se,{"prepend-icon":t(Qe),title:"Você tem certeza que deseja deletar este chamado?"},{actions:l(()=>[e(wl),e(T,{onClick:v=>a.value=!1},{default:l(()=>[Ht]),_:2},1032,["onClick"]),e(T,{onClick:s[3]||(s[3]=v=>z(t(P))),variant:"tonal",color:"error",loading:$.value},{default:l(()=>[Qt]),_:1},8,["loading"])]),_:2},1032,["prepend-icon"])]),_:1},8,["modelValue"])],64)),e(He,{taskId:x.value,showChatModal:F.value,userId:B.value,"onUpdate:showChatModal":s[5]||(s[5]=a=>F.value=a)},null,8,["taskId","showChatModal","userId"]),e(de,{modelValue:E.value,"onUpdate:modelValue":s[8]||(s[8]=a=>E.value=a),"max-width":"500px",persistent:""},{default:l(()=>[e(se,null,{default:l(()=>[e(pe,null,{default:l(()=>[Kt]),_:1}),e(ne,null,{default:l(()=>[e(He,{taskId:x.value,showChatModal:F.value,userId:B.value,"onUpdate:showChatModal":s[6]||(s[6]=a=>F.value=a)},null,8,["taskId","showChatModal","userId"])]),_:1}),e(Me,null,{default:l(()=>[e(T,{color:"blue darken-1",text:"",onClick:s[7]||(s[7]=a=>E.value=!1)},{default:l(()=>[Wt]),_:1}),e(T,{color:"blue darken-1",text:"",onClick:g},{default:l(()=>[Xt]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Et,{taskId:x.value,showAttachmentsModal:j.value,"onUpdate:showAttachmentsModal":s[9]||(s[9]=a=>j.value=a)},null,8,["taskId","showAttachmentsModal"])]))}};export{aa as default};
