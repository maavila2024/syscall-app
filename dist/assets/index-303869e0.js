import{F as ke,E as el,i as ll,j as Ne,N as tl,k as al,l as sl}from"./vue-tabler-icons.es-586af900.js";import{a3 as Oe,a4 as W,a5 as xe,L as r,B as Y,o as g,e as te,w as l,a as m,b as e,y as a,V as T,c as P,m as ve,an as ge,I as fe,ao as D,l as _e,q as $e,ap as ol,t as Z,i as il,M as Pe,N as De,p as ie,aq as Ee,z as re,F as we,a6 as nl,d as E,u as ze,ar as ul,a7 as je,as as ee,a8 as X,ak as Je,at as Be,au as Le,Q as ue,a9 as Ge,a0 as Ce,ai as _,_ as i,ab as C,aa as K,av as le,aw as He,S as Qe,ac as Ie,ax as Fe,al as Ke,ay as Me,r as rl,ag as de,ah as oe,af as se,G as dl,j as ml,az as Te,ae as ne,ad as he,T as cl,aj as pl}from"./index-19f3b6a9.js";import{a as b,u as qe}from"./vee-validate.esm-c235669a.js";import{_ as vl}from"./_plugin-vue_export-helper-c27b6911.js";const be=Oe("tasks",{state:()=>({tasks:[],priori:[],complexity:[],users:[],taskStatus:[],toEdit:{},toShow:{},toDelete:{},toShowChat:{},toAddChat:{},taskFiles:[],search:""}),actions:{async getTasks(u=""){try{const n=await W.get("api/tasks",{params:{search:u}});this.tasks=n.data.data}catch(n){console.error("Error fetching tasks:",n)}},async getPriorities(){try{const u=await W.get("api/priorities");this.priori=u.data.data}catch(u){console.error("Error fetching priorities:",u)}},async getComplexities(){try{const u=await W.get("api/complexities");this.complexity=u.data.data}catch(u){console.error("Error fetching complexities:",u)}},async getUsers(){try{const u=await W.get("api/users");this.users=u.data.data}catch(u){console.error("Error fetching users:",u)}},async getTasksStatus(){try{const u=await W.get("api/tasks-status");this.taskStatus=u.data.data}catch(u){console.error("Error fetching task statuses:",u)}},async storeTask(u,n){try{const c=(await W.post("api/tasks",u)).data;if(await this.getTasks(),console.log("task",c),n&&n.length>0){const R=new FormData;R.append("task_id",c.id);for(const F of n)R.append("files[]",F);await this.uploadTaskFile(R)}return c}catch(o){console.error("Error storing task:",o)}},async updateTask(u,n){try{const c=(await W.put(`api/tasks/${u}`,n)).data.data,R=this.tasks.findIndex(F=>F.id===u);this.tasks.splice(R,1,c),await this.getTasks()}catch(o){console.error("Error updating task:",o)}},async deleteTask(u){try{await W.delete(`api/tasks/${u}`);const n=this.tasks.findIndex(o=>o.id===u);this.tasks.splice(n,1)}catch(n){console.error("Error deleting task:",n)}},async uploadTaskFile(u){console.log("upload",u);try{return(await W.post("api/task-file",u,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw console.error("Error uploading task file:",n),n}},async getTaskFiles(u){try{const n=await W.get(`api/task-file/${u}`);this.taskFiles=n.data.data}catch(n){console.error("Error fetching task files:",n)}},async deleteTaskFile(u){try{await W.delete(`api/task-file/${u}`);const n=this.taskFiles.findIndex(o=>o.id===u);n!==-1&&this.taskFiles.splice(n,1)}catch(n){console.error("Error deleting task file:",n)}}}});const fl=m("th",{class:"text-left",style:{width:"100px"}},"Chamado",-1),_l=m("th",{class:"text-left",style:{width:"150px"}},"Título",-1),bl=m("th",{class:"text-left",style:{width:"200px"}},"Descrição",-1),yl={class:"text-left",style:{width:"120px"}},Vl=E("Solicitante "),kl={class:"text-left",style:{width:"150px"}},gl=E("Responsável "),hl={class:"text-left",style:{width:"120px"}},xl=E("Status "),wl={class:"text-left",style:{width:"120px"}},Cl=E("Prioridade "),Sl={class:"text-left",style:{width:"150px"}},Ul=E("Complexidade "),$l=m("th",{class:"text-left",style:{width:"100px"}},"Ações",-1),Tl=m("th",null,null,-1),Al={key:0},Fl=m("td",null,null,-1),Ml=m("td",null,null,-1),jl=m("td",null,null,-1),Il={key:0},ql={key:1},Pl={key:2},Dl={key:3},El={key:4},Rl={key:5},Nl={key:6},Ol={key:7},zl={key:8},Jl={key:9},Bl=m("td",null,null,-1),Ll=m("td",null,null,-1),Gl={class:"text-clamp"},Hl=E(" Default "),Ql={class:"text-clamp"},Kl={class:"text-clamp"},Wl={class:"text-clamp"},Xl={class:"text-clamp"},Yl={class:"text-right"},Zl={class:"d-flex align-center"},et={class:"text-clamp"},lt={class:"text-right"},tt={class:"d-flex align-center"},at={class:"text-clamp"},st={class:"text-right"},ot={class:"d-flex align-center"},it={setup(u){const n=be(),{tasks:o,toShow:c,toEdit:R,toDelete:F,taskFiles:N}=xe(n),p=r([]),A=r([]),h=r([]),$=r([]),S=r([]),L=r(!1),O=r(!1),U=r(!1),z=r(!1),M=r(!1),x=Y(()=>[...new Set(o.value.map(j=>j.task_status.name))]),I=Y(()=>[...new Set(o.value.map(j=>j.user_owner.first_name))]),w=Y(()=>[...new Set(o.value.map(j=>{var V;return((V=j.user_responsible)==null?void 0:V.first_name)||"Nenhum responsável"}))]),G=Y(()=>[...new Set(o.value.map(j=>j.priority.name))]),J=Y(()=>[...new Set(o.value.map(j=>j.complexity.name))]),B=r(!1),q=r(!1),k=r(!1),s=r(!1),t=r(!1),y=()=>{B.value=p.value.length===x.value.length},ye=()=>{q.value=A.value.length===I.value.length},me=()=>{k.value=h.value.length===w.value.length},ce=()=>{s.value=$.value.length===G.value.length},Ve=()=>{t.value=S.value.length===J.value.length},pe=()=>{B.value?p.value=[]:p.value=[...x.value]},Se=()=>{q.value?A.value=[]:A.value=[...I.value]},H=()=>{k.value?h.value=[]:h.value=[...w.value]},d=()=>{s.value?$.value=[]:$.value=[...G.value]},f=()=>{t.value?S.value=[]:S.value=[...J.value]},Ye=Y(()=>o.value.filter(j=>{var ae;const V=p.value.length===0||p.value.includes(j.task_status.name),v=A.value.length===0||A.value.includes(j.user_owner.first_name),Ae=h.value.length===0||h.value.includes(((ae=j.user_responsible)==null?void 0:ae.first_name)||"Nenhum responsável"),Ue=$.value.length===0||$.value.includes(j.priority.name),Q=S.value.length===0||S.value.includes(j.complexity.name);return V&&v&&Ae&&Ue&&Q})),Ze=j=>({color:j.color});return(j,V)=>(g(),te(nl,{class:"border-opacity-100"},{default:l(()=>[m("thead",null,[m("tr",null,[fl,_l,bl,m("th",yl,[Vl,e(T,{icon:"",onClick:V[0]||(V[0]=v=>O.value=!O.value)},{default:l(()=>[e(a(ke))]),_:1})]),m("th",kl,[gl,e(T,{icon:"",onClick:V[1]||(V[1]=v=>U.value=!U.value)},{default:l(()=>[e(a(ke))]),_:1})]),m("th",hl,[xl,e(T,{icon:"",onClick:V[2]||(V[2]=v=>L.value=!L.value)},{default:l(()=>[e(a(ke))]),_:1})]),m("th",wl,[Cl,e(T,{icon:"",onClick:V[3]||(V[3]=v=>z.value=!z.value)},{default:l(()=>[e(a(ke))]),_:1})]),m("th",Sl,[Ul,e(T,{icon:"",onClick:V[4]||(V[4]=v=>M.value=!M.value)},{default:l(()=>[e(a(ke))]),_:1})]),$l,Tl])]),m("tbody",null,[O.value||U.value||L.value||z.value||M.value?(g(),P("tr",Al,[Fl,Ml,jl,O.value?(g(),P("td",Il,[e(D,{modelValue:A.value,"onUpdate:modelValue":V[6]||(V[6]=v=>A.value=v),items:a(I),label:"Filtro Solicitante",multiple:"",onChange:ye},{"prepend-item":l(()=>[e(ve,null,{default:l(()=>[e(ge,{modelValue:q.value,"onUpdate:modelValue":V[5]||(V[5]=v=>q.value=v),label:q.value?"Desmarcar todos":"Selecionar todos",onChange:Se},null,8,["modelValue","label"])]),_:1}),e(fe)]),_:1},8,["modelValue","items"])])):(g(),P("td",ql)),U.value?(g(),P("td",Pl,[e(D,{modelValue:h.value,"onUpdate:modelValue":V[8]||(V[8]=v=>h.value=v),items:a(w),label:"Filtro Responsável",multiple:"",onChange:me},{"prepend-item":l(()=>[e(ve,null,{default:l(()=>[e(ge,{modelValue:k.value,"onUpdate:modelValue":V[7]||(V[7]=v=>k.value=v),label:k.value?"Desmarcar todos":"Selecionar todos",onChange:H},null,8,["modelValue","label"])]),_:1}),e(fe)]),_:1},8,["modelValue","items"])])):(g(),P("td",Dl)),L.value?(g(),P("td",El,[e(D,{modelValue:p.value,"onUpdate:modelValue":V[10]||(V[10]=v=>p.value=v),items:a(x),label:"Filtro Status",multiple:"",onChange:y},{"prepend-item":l(()=>[e(ve,null,{default:l(()=>[e(ge,{modelValue:B.value,"onUpdate:modelValue":V[9]||(V[9]=v=>B.value=v),label:B.value?"Desmarcar todos":"Selecionar todos",onChange:pe},null,8,["modelValue","label"])]),_:1}),e(fe)]),_:1},8,["modelValue","items"])])):(g(),P("td",Rl)),z.value?(g(),P("td",Nl,[e(D,{modelValue:$.value,"onUpdate:modelValue":V[12]||(V[12]=v=>$.value=v),items:a(G),label:"Filtro Prioridade",multiple:"",onChange:ce},{"prepend-item":l(()=>[e(ve,null,{default:l(()=>[e(ge,{modelValue:s.value,"onUpdate:modelValue":V[11]||(V[11]=v=>s.value=v),label:s.value?"Desmarcar todos":"Selecionar todos",onChange:d},null,8,["modelValue","label"])]),_:1}),e(fe)]),_:1},8,["modelValue","items"])])):(g(),P("td",Ol)),M.value?(g(),P("td",zl,[e(D,{modelValue:S.value,"onUpdate:modelValue":V[14]||(V[14]=v=>S.value=v),items:a(J),label:"Filtro Complexidade",multiple:"",onChange:Ve},{"prepend-item":l(()=>[e(ve,null,{default:l(()=>[e(ge,{modelValue:t.value,"onUpdate:modelValue":V[13]||(V[13]=v=>t.value=v),label:t.value?"Desmarcar todos":"Selecionar todos",onChange:f},null,8,["modelValue","label"])]),_:1}),e(fe)]),_:1},8,["modelValue","items"])])):(g(),P("td",Jl)),Bl,Ll])):_e("",!0),(g(!0),P(we,null,$e(a(Ye),(v,Ae)=>{var Ue;return g(),P("tr",{key:Ae,style:ol(Ze(v.task_status))},[m("td",null,Z(v.task_code),1),m("td",null,[m("div",Gl,Z(v.name),1),v.default?(g(),te(il,{key:0,size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:l(()=>[Hl]),_:1})):_e("",!0)]),m("td",null,[m("div",Ql,Z(v.description),1)]),m("td",null,[m("div",Kl,Z(v.user_owner.first_name),1)]),m("td",null,[m("div",Wl,Z(((Ue=v.user_responsible)==null?void 0:Ue.first_name)||"Nenhum responsável"),1)]),m("td",null,[m("div",Xl,Z(v.task_status.name),1)]),m("td",Yl,[m("div",Zl,[e(re,{text:v.priority_justification},{activator:l(({props:Q})=>[e(T,Pe(De(Q)),{default:l(()=>[m("span",ie(j.attrs,Ee(j.on)),[m("div",et,Z(v.priority.name),1)],16)]),_:2},1040)]),_:2},1032,["text"])])]),m("td",lt,[m("div",tt,[e(re,{text:v.complexity_justification||"Aguardando análise"},{activator:l(({props:Q})=>[e(T,Pe(De(Q)),{default:l(()=>{var ae;return[m("span",ie(j.attrs,Ee(j.on)),[m("div",at,Z(((ae=v.complexity)==null?void 0:ae.name)||"Aguardando análise"),1)],16)]}),_:2},1040)]),_:2},1032,["text"])])]),m("td",st,[m("div",ot,[e(re,{text:"Visualizar Chamado"},{activator:l(({props:Q})=>[e(T,ie({icon:"",flat:"",onClick:ae=>c.value=v},Q),{default:l(()=>[e(a(el),{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024),e(re,{text:"Editar Chamado"},{activator:l(({props:Q})=>[e(T,ie({icon:"",flat:"",onClick:ae=>R.value=v},Q),{default:l(()=>[e(a(ll),{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024),e(re,{text:"Deletar Chamado"},{activator:l(({props:Q})=>[e(T,ie({icon:"",flat:"",onClick:ae=>F.value=v},Q),{default:l(()=>[e(a(Ne),{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024),e(re,{text:"Consultar Notas de Trabalho"},{activator:l(({props:Q})=>[e(T,ie({icon:"",flat:"",onClick:ae=>j.$emit("openChat",v)},Q),{default:l(()=>[e(a(tl),{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024),e(re,{text:"Anexos"},{activator:l(({props:Q})=>[e(T,ie({icon:"",flat:"",onClick:ae=>j.$emit("openAttachments",v)},Q),{default:l(()=>[e(a(al),{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024)])])],4)}),128))])]),_:1}))}},nt={emits:["cancel","add"],setup(u,{emit:n}){const o=ze(),c=be();r([]);const R=[{label:"Grãos",value:1},{label:"Proteína",value:2}],F=[{label:"Algo que funcionava, parou de funcionar?",value:1},{label:"Fazer uma solicitação, algo novo (melhoria)?",value:2}],N=Y(()=>{var s;return((s=c.priori.find(t=>t.is_default))==null?void 0:s.id)||null}),p=Y(()=>{var s;return((s=c.taskStatus.find(t=>t.is_default))==null?void 0:s.id)||null}),{value:A}=b("segment",2),{value:h}=b("priority_id"),{value:$}=b("task_status_id");ul(()=>{N.value&&!h.value&&(h.value=N.value),p.value&&!$.value&&($.value=p.value)});const S=Y(()=>{const s=c.priori.find(t=>t.id===h.value);return s&&s.justify}),L=Y(()=>je({segment:ee().required().label("Segmento"),task_type:ee().required().label("Tipo de chamado"),name:X().required().label("Título"),system_screen:X().required().label("Tela"),description:X().required().label("Descrição"),owner_id:ee().required().label("Solicitante"),task_status_id:ee().required().label("Status do Chamado"),priority_id:ee().required().label("Prioridade"),observation:X().nullable().label("Observação"),priority_justification:S.value?X().required().label("Justificativa da Prioridade"):X().label("Justificativa da Prioridade"),status:Je().required().label("Status"),files:Be().of(Le()).nullable()})),{handleSubmit:O,errors:U,isSubmitting:z}=qe({validationSchema:L,initialValues:{segment:1,task_type:"",name:"",system_screen:"",description:"",owner_id:o.user.id,responsible_id:"",task_status_id:p.value,priority_id:N.value,observation:"",created_at:"",expected_date:"",finish_date:"",priority_justification:"",status:!0,files:[]}}),M=O(async s=>{console.log("values",s);try{const t=k.value,y=await c.storeTask(s,t);n("add")}catch(t){console.error("Erro ao adicionar comentário ou fazer upload dos arquivos:",t)}}),x=r(""),{value:I}=b("name"),{value:w}=b("task_type"),{value:G}=b("system_screen"),{value:J}=b("description");b("owner_id"),b("responsible_id");const{value:B}=b("observation");b("created_at"),b("expected_date"),b("finish_date");const{value:q}=b("priority_justification");b("status");const{value:k}=b("files");return ue(N,s=>{s&&!h.value&&(h.value=s)}),ue(p,s=>{s&&!$.value&&($.value=s)}),ue(h,()=>{S.value||(q.value="")}),(s,t)=>(g(),P("div",null,[x.value?(g(),te(Ge,{key:0,color:"error",class:"mb-2"},{default:l(()=>[E(Z(x.value),1)]),_:1})):_e("",!0),e(Ie,{onSubmit:Qe(a(M),["prevent"])},{default:l(()=>[e(Ce,null,{default:l(()=>[e(_,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(D,{modelValue:a(A),"onUpdate:modelValue":t[0]||(t[0]=y=>C(A)?A.value=y:null),"error-messages":a(U).segment,items:R,label:"Segmento","item-title":"label","item-value":"value"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(D,{modelValue:a(w),"onUpdate:modelValue":t[1]||(t[1]=y=>C(w)?w.value=y:null),"error-messages":a(U).task_type,items:F,label:"Tipo de chamado","item-title":"label","item-value":"value"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(K,{modelValue:a(I),"onUpdate:modelValue":t[2]||(t[2]=y=>C(I)?I.value=y:null),"error-messages":a(U).name,label:"Título",variant:"outlined",color:"primary",maxlength:"60",counter:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(K,{modelValue:a(G),"onUpdate:modelValue":t[3]||(t[3]=y=>C(G)?G.value=y:null),"error-messages":a(U).system_screen,label:"Tela",variant:"outlined",color:"primary",maxlength:"60",counter:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(le,{modelValue:a(J),"onUpdate:modelValue":t[4]||(t[4]=y=>C(J)?J.value=y:null),"error-messages":a(U).description,label:"Descrição",variant:"outlined",color:"primary",rows:"5"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(le,{modelValue:a(B),"onUpdate:modelValue":t[5]||(t[5]=y=>C(B)?B.value=y:null),"error-messages":a(U).observation,label:"Observação",variant:"outlined",color:"primary",rows:"5"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"12",md:"12"},{default:l(()=>[e(D,{modelValue:a(h),"onUpdate:modelValue":t[6]||(t[6]=y=>C(h)?h.value=y:null),"error-messages":a(U).priority_id,items:a(c).priori,label:"Prioridade","item-title":"name","item-value":"id"},null,8,["modelValue","error-messages","items"])]),_:1})]),_:1}),a(S)?(g(),te(_,{key:0},{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(le,{modelValue:a(q),"onUpdate:modelValue":t[7]||(t[7]=y=>C(q)?q.value=y:null),"error-messages":a(U).priority_justification,label:"Justificativa da Prioridade",variant:"outlined",color:"primary",rows:"5"},null,8,["modelValue","error-messages"])]),_:1})]),_:1})):_e("",!0),e(_,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(He,{modelValue:a(k),"onUpdate:modelValue":t[8]||(t[8]=y=>C(k)?k.value=y:null),label:"Anexos do chamado",multiple:"","error-messages":a(U).files,"show-size":""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,{justify:"end"},{default:l(()=>[e(i,{cols:"12",md:"auto"},{default:l(()=>[e(T,{flat:"",text:"Cancelar",onClick:t[9]||(t[9]=y=>n("cancel"))})]),_:1}),e(i,{cols:"12",md:"auto"},{default:l(()=>[e(T,{type:"submit",color:"primary",flat:"",loading:a(z),text:"Adicionar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]))}},ut={props:{task:{type:Object,required:!0}},emits:["cancel","edit"],setup(u,{emit:n}){const o=u,c=be(),R=[{label:"Grãos",value:1},{label:"Proteína",value:2}],F=[{label:"É uma melhoria ?",value:1},{label:"É algo novo ?",value:2}],{handleSubmit:N,errors:p,isSubmitting:A,setFieldValue:h,setErrors:$}=qe({validationSchema:je({segment:ee().required().label("Segmento"),task_type:ee().required().label("Tipo de chamado"),task_code:X().required().label("Número do chamado"),name:X().required().label("Título"),system_screen:X().required().label("Tela"),description:X().required().label("Descrição"),owner_id:ee().required().label("Solicitante"),responsible_id:ee().required().label("Responsável"),task_status_id:ee().required().label("Status do Chamado"),priority_id:ee().required().label("Prioridade do Chamado"),complexity_id:ee().required().label("Complexidade do Chamado"),observation:X().nullable().label("Observação"),created_at:Fe().nullable().label("Data de Criação"),expected_date:Fe().nullable().label("Data de Criação").transform((H,d)=>d===""?null:H),finish_date:Fe().nullable().label("Data de Conclusão").transform((H,d)=>d===""?null:H),priority_justification:X().nullable().label("Justificativa da Prioridade"),complexity_justification:X().nullable().label("Justificativa da Complexidade"),status:Je().required().label("Status")}),initialValues:{segment:o.task.segment,task_type:o.task.task_type,task_code:o.task.task_code,name:o.task.name,description:o.task.description,owner_id:o.task.owner_id,responsible_id:o.task.responsible_id,task_status_id:o.task.task_status_id,system_screen:o.task.system_screen,observation:o.task.observation,priority_id:o.task.priority_id,complexity_id:o.task.complexity_id,priority_justification:o.task.priority_justification,complexity_justification:o.task.complexity_justification,finish_date:o.task.finish_date?o.task.finish_date.split("T")[0]:null,expected_date:o.task.expected_date?o.task.expected_date.split("T")[0]:null,created_at:o.task.created_at?o.task.created_at.split("T")[0]:null,status:o.task.status}}),S={complexityRef:r(null),complexityJustificationRef:r(null),responsibleRef:r(null)},L=()=>{p.responsible_id?Me(()=>{S.responsibleRef.value.focus(),S.responsibleRef.value.$el.scrollIntoView({behavior:"smooth",block:"center"})}):p.complexity_id?Me(()=>{S.complexityRef.value.focus(),S.complexityRef.value.$el.scrollIntoView({behavior:"smooth",block:"center"})}):p.complexity_justification&&Me(()=>{S.complexityJustificationRef.value.focus(),S.complexityJustificationRef.value.$el.scrollIntoView({behavior:"smooth",block:"center"})})};ue(p,H=>{console.log(p),L()});const O=N(async H=>{Se.value||delete H.priority_justification,me.value||(H.expected_date=null),ce.value||(H.finish_date=null),console.log("Payload being sent to the backend:",H),await c.updateTask(o.task.id,H),n("edit")}),U=r(""),{value:z}=b("segment"),{value:M}=b("priority_id"),{value:x}=b("complexity_id"),{value:I}=b("name"),{value:w}=b("task_code"),{value:G}=b("task_type"),{value:J}=b("description"),{value:B}=b("owner_id"),{value:q}=b("responsible_id"),{value:k}=b("task_status_id"),{value:s}=b("system_screen"),{value:t}=b("observation"),{value:y}=b("priority_justification"),{value:ye}=b("complexity_justification"),{value:me}=b("expected_date"),{value:ce}=b("finish_date"),{value:Ve}=b("created_at"),{value:pe}=b("status"),Se=Y(()=>{const H=c.priori.find(d=>d.id===M.value);return H&&H.is_justify});return ue(M,H=>{Se.value?h("priority_justification",y.value||""):(y.value="",$({priority_justification:void 0}))}),(H,d)=>(g(),P("div",null,[U.value?(g(),te(Ge,{key:0,color:"error",class:"mb-2"},{default:l(()=>[E(Z(U.value),1)]),_:1})):_e("",!0),e(Ie,{onSubmit:Qe(a(O),["prevent"])},{default:l(()=>[e(Ce,null,{default:l(()=>[e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(D,{modelValue:a(z),"onUpdate:modelValue":d[0]||(d[0]=f=>C(z)?z.value=f:null),"error-messages":a(p).segment,items:R,label:"Segmento","item-title":"label","item-value":"value"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(D,{modelValue:a(G),"onUpdate:modelValue":d[1]||(d[1]=f=>C(G)?G.value=f:null),"error-messages":a(p).task_type,items:F,label:"Tipo de chamado","item-title":"label","item-value":"value"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(K,{modelValue:a(w),"onUpdate:modelValue":d[2]||(d[2]=f=>C(w)?w.value=f:null),"error-messages":a(p).task_code,label:"Número do chamado",variant:"outlined",color:"primary",disabled:""},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(K,{modelValue:a(I),"onUpdate:modelValue":d[3]||(d[3]=f=>C(I)?I.value=f:null),"error-messages":a(p).name,label:"Título",variant:"outlined",color:"primary",maxlength:"60",counter:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(K,{modelValue:a(s),"onUpdate:modelValue":d[4]||(d[4]=f=>C(s)?s.value=f:null),"error-messages":a(p).system_screen,label:"Tela",variant:"outlined",color:"primary",maxlength:"60",counter:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(le,{modelValue:a(J),"onUpdate:modelValue":d[5]||(d[5]=f=>C(J)?J.value=f:null),"error-messages":a(p).description,label:"Descrição",variant:"outlined",color:"primary",rows:"5"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(D,{modelValue:a(B),"onUpdate:modelValue":d[6]||(d[6]=f=>C(B)?B.value=f:null),"error-messages":a(p).owner_id,items:a(c).users,label:"Solicitante","item-title":"first_name","item-value":"id",disabled:""},null,8,["modelValue","error-messages","items"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(K,{modelValue:a(Ve),"onUpdate:modelValue":d[7]||(d[7]=f=>C(Ve)?Ve.value=f:null),"error-messages":a(p).created_at,label:"Data de Criação",variant:"outlined",type:"date",disabled:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(D,{modelValue:a(k),"onUpdate:modelValue":d[8]||(d[8]=f=>C(k)?k.value=f:null),"error-messages":a(p).task_status_id,items:a(c).taskStatus,label:"Status do Chamado","item-title":"name","item-value":"id"},null,8,["modelValue","error-messages","items"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(D,{modelValue:a(q),"onUpdate:modelValue":d[9]||(d[9]=f=>C(q)?q.value=f:null),"error-messages":a(p).responsible_id,items:a(c).users,label:"Responsável","item-title":"first_name","item-value":"id",ref:"responsibleRef"},null,8,["modelValue","error-messages","items"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(le,{modelValue:a(t),"onUpdate:modelValue":d[10]||(d[10]=f=>C(t)?t.value=f:null),"error-messages":a(p).observation,label:"Observação",variant:"outlined",color:"primary",rows:"5"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(K,{modelValue:a(me),"onUpdate:modelValue":d[11]||(d[11]=f=>C(me)?me.value=f:null),"error-messages":a(p).expected_date,label:"Data Esperada",variant:"outlined",type:"date"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(K,{modelValue:a(ce),"onUpdate:modelValue":d[12]||(d[12]=f=>C(ce)?ce.value=f:null),"error-messages":a(p).finish_date,label:"Data de Conclusão",variant:"outlined",type:"date"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(D,{modelValue:a(M),"onUpdate:modelValue":d[13]||(d[13]=f=>C(M)?M.value=f:null),"error-messages":a(p).priority_id,items:a(c).priori,label:"Prioridade","item-title":"name","item-value":"id"},null,8,["modelValue","error-messages","items"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(le,{modelValue:a(y),"onUpdate:modelValue":d[14]||(d[14]=f=>C(y)?y.value=f:null),"error-messages":a(p).priority_justification,label:"Justificativa da Prioridade",variant:"outlined",color:"primary",rows:"5"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(D,{modelValue:a(x),"onUpdate:modelValue":d[15]||(d[15]=f=>C(x)?x.value=f:null),"error-messages":a(p).complexity_id,items:a(c).complexity,label:"Complexidade do Chamado","item-title":"name","item-value":"id",ref:"complexityRef"},null,8,["modelValue","error-messages","items"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(le,{modelValue:a(ye),"onUpdate:modelValue":d[16]||(d[16]=f=>C(ye)?ye.value=f:null),"error-messages":a(p).complexity_justification,label:"Justificativa da Complexidade",variant:"outlined",color:"primary",rows:"5",ref:"complexityJustificationRef"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(Ke,{modelValue:a(pe),"onUpdate:modelValue":d[17]||(d[17]=f=>C(pe)?pe.value=f:null),label:a(pe)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(_,{justify:"end"},{default:l(()=>[e(i,{cols:"12",md:"auto"},{default:l(()=>[e(T,{flat:"",text:"Cancelar",onClick:d[18]||(d[18]=f=>n("cancel"))})]),_:1}),e(i,{cols:"12",md:"auto"},{default:l(()=>[e(T,{type:"submit",color:"primary",flat:"",loading:a(A),text:"Editar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]))}};const rt={props:{task:{type:Object,required:!0}},emits:["cancel"],setup(u,{emit:n}){const o=u,c=be(),R=[{label:"Grãos",value:1},{label:"Proteína",value:2}],F=[{label:"É uma melhoria ?",value:1},{label:"É algo novo ?",value:2}],N=r(o.task.segment),p=r(o.task.task_type),A=r(o.task.task_code),h=r(o.task.name),$=r(o.task.description),S=r(o.task.owner_id),L=r(o.task.responsible_id),O=r(o.task.task_status_id),U=r(o.task.system_screen),z=r(o.task.observation),M=r(o.task.priority_id),x=r(o.task.complexity_id),I=r(o.task.priority_justification),w=r(o.task.complexity_justification),G=r(o.task.finish_date?o.task.finish_date.split("T")[0]:null),J=r(o.task.expected_date?o.task.expected_date.split("T")[0]:null),B=r(o.task.created_at?o.task.created_at.split("T")[0]:null),q=r(o.task.status);return(k,s)=>(g(),P("div",null,[e(Ce,null,{default:l(()=>[e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(D,{modelValue:N.value,"onUpdate:modelValue":s[0]||(s[0]=t=>N.value=t),items:R,label:"Segmento","item-title":"label","item-value":"value",disabled:"",class:"bold-label"},null,8,["modelValue"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(D,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=t=>p.value=t),items:F,label:"Tipo de chamado","item-title":"label","item-value":"value",disabled:"",class:"bold-label"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(K,{modelValue:A.value,"onUpdate:modelValue":s[2]||(s[2]=t=>A.value=t),label:"Número do chamado",variant:"outlined",color:"primary",disabled:"",class:"bold-label"},null,8,["modelValue"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(K,{modelValue:h.value,"onUpdate:modelValue":s[3]||(s[3]=t=>h.value=t),label:"Título",variant:"outlined",color:"primary",readonly:"",class:"bold-label",rows:"2",maxlength:"60"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(K,{modelValue:U.value,"onUpdate:modelValue":s[4]||(s[4]=t=>U.value=t),label:"Tela",variant:"outlined",color:"primary",disabled:"",class:"bold-label"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(le,{modelValue:$.value,"onUpdate:modelValue":s[5]||(s[5]=t=>$.value=t),label:"Descrição",variant:"outlined",color:"primary",rows:"5",readonly:"",class:"bold-label",maxlength:"150",counter:""},null,8,["modelValue"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(D,{modelValue:S.value,"onUpdate:modelValue":s[6]||(s[6]=t=>S.value=t),items:a(c).users,label:"Solicitante","item-title":"first_name","item-value":"id",disabled:"",class:"bold-label"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(K,{modelValue:B.value,"onUpdate:modelValue":s[7]||(s[7]=t=>B.value=t),label:"Data de Criação",variant:"outlined",type:"date",disabled:"",class:"bold-label"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(D,{modelValue:O.value,"onUpdate:modelValue":s[8]||(s[8]=t=>O.value=t),items:a(c).taskStatus,label:"Status do Chamado","item-title":"name","item-value":"id",disabled:"",class:"bold-label"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(D,{modelValue:L.value,"onUpdate:modelValue":s[9]||(s[9]=t=>L.value=t),items:a(c).users,label:"Responsável","item-title":"first_name","item-value":"id",disabled:"",class:"bold-label"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(le,{modelValue:z.value,"onUpdate:modelValue":s[10]||(s[10]=t=>z.value=t),label:"Observação",variant:"outlined",color:"primary",rows:"5",readonly:"",class:"bold-label"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(K,{modelValue:J.value,"onUpdate:modelValue":s[11]||(s[11]=t=>J.value=t),label:"Data Esperada",variant:"outlined",type:"date",disabled:"",class:"bold-label"},null,8,["modelValue"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(K,{modelValue:G.value,"onUpdate:modelValue":s[12]||(s[12]=t=>G.value=t),label:"Data de Conclusão",variant:"outlined",type:"date",disabled:"",class:"bold-label"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(D,{modelValue:M.value,"onUpdate:modelValue":s[13]||(s[13]=t=>M.value=t),items:a(c).priori,label:"Prioridade","item-title":"name","item-value":"id",disabled:"",class:"bold-label"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(le,{modelValue:I.value,"onUpdate:modelValue":s[14]||(s[14]=t=>I.value=t),label:"Justificativa da Prioridade",variant:"outlined",color:"primary",rows:"5",readonly:"",class:"bold-label"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(D,{modelValue:x.value,"onUpdate:modelValue":s[15]||(s[15]=t=>x.value=t),items:a(c).complexity,label:"Complexidade do Chamado","item-title":"name","item-value":"id",disabled:"",class:"bold-label"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(le,{modelValue:w.value,"onUpdate:modelValue":s[16]||(s[16]=t=>w.value=t),label:"Justificativa da Complexidade",variant:"outlined",color:"primary",rows:"5",readonly:"",class:"bold-label"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(Ke,{modelValue:q.value,"onUpdate:modelValue":s[17]||(s[17]=t=>q.value=t),label:q.value?"Ativo":"Inativo",color:"primary",inset:"",disabled:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(_,{justify:"end"},{default:l(()=>[e(i,{cols:"12",md:"auto"},{default:l(()=>[e(T,{flat:"",text:"Fechar",onClick:s[18]||(s[18]=t=>k.$emit("cancel"))})]),_:1})]),_:1})]),_:1})]))}},dt=vl(rt,[["__scopeId","data-v-b48ed556"]]),We=Oe("chats",{state:()=>({messages:[]}),actions:{async fetchMessages(u){try{const n=await W.get(`/api/interactions/${u}`);this.messages=n.data}catch(n){console.error("Error fetching messages:",n)}},async createInteraction(u,n,o){try{return(await W.post("/api/interactions",{task_id:u,comment:n,user_id:o})).data}catch(c){console.error("Error creating interaction:",c)}},async uploadFile(u){try{return(await W.post("/api/interaction-file",u,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw console.error("Error uploading file:",n),n}}}});function Xe(u){return`https://syscall-api.devtest.com.br//storage/${u}`}const mt=m("span",{class:"text-h5"},"Notas de Trabalho",-1),ct={key:0},pt=["href"],vt=E("Adicionar Comentário"),ft=E("Fechar"),_t=m("span",{class:"text-h5"},"Adicionar Comentário",-1),bt=E("Cancelar"),yt=E("Adicionar"),Re={props:{taskId:{type:Number,required:!0},showChatModal:{type:Boolean,required:!0},userId:{type:Number,required:!0}},emits:["update:showChatModal"],setup(u,{emit:n}){const o=u,c=We(),{messages:R}=xe(c),F=r(!1),N=r(!1),p=je({comment:X().required().label("Comentário"),files:Be().of(Le()).nullable()}),{handleSubmit:A,errors:h,isSubmitting:$}=qe({validationSchema:p,initialValues:{comment:"",files:[]}}),S=A(async M=>{try{const x=await c.createInteraction(o.taskId,M.comment,o.userId);if(M.files&&M.files.length>0){const I=new FormData;I.append("interaction_id",x.id);for(const w of M.files)I.append("files[]",w);await c.uploadFile(I)}await c.fetchMessages(o.taskId),N.value=!1,n("update:showChatModal",!1)}catch(x){console.error("Erro ao adicionar comentário ou fazer upload dos arquivos:",x)}}),{value:L}=b("comment"),{value:O}=b("files");ue(()=>o.showChatModal,async M=>{M?(F.value=!0,await c.fetchMessages(o.taskId)):F.value=!1});const U=()=>{n("update:showChatModal",!1)},z=()=>{N.value=!0};return(M,x)=>{const I=rl("v-list-item-content");return g(),te(ne,{modelValue:F.value,"onUpdate:modelValue":x[4]||(x[4]=w=>F.value=w),"max-width":"800px"},{default:l(()=>[e(se,null,{default:l(()=>[e(de,null,{default:l(()=>[mt]),_:1}),e(oe,null,{default:l(()=>[e(Ce,null,{default:l(()=>[e(_,null,{default:l(()=>[(g(!0),P(we,null,$e(a(R),(w,G)=>(g(),te(i,{key:G,cols:"12"},{default:l(()=>[e(se,{class:"mb-3"},{default:l(()=>[e(oe,null,{default:l(()=>[E(Z(w.comment)+" ",1),w.interaction_files&&w.interaction_files.length?(g(),P("div",ct,[e(fe),e(dl,null,{default:l(()=>[(g(!0),P(we,null,$e(w.interaction_files,(J,B)=>(g(),te(ve,{key:B},{default:l(()=>[e(I,null,{default:l(()=>[e(ml,null,{default:l(()=>[m("a",{href:a(Xe)(J.path),target:"_blank"},Z(J.name),9,pt)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)])):_e("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(Te,null,{default:l(()=>[e(T,{color:"primary",onClick:z},{default:l(()=>[vt]),_:1}),e(T,{color:"secondary",onClick:U},{default:l(()=>[ft]),_:1})]),_:1})]),_:1}),e(ne,{modelValue:N.value,"onUpdate:modelValue":x[3]||(x[3]=w=>N.value=w),"max-width":"500px"},{default:l(()=>[e(se,null,{default:l(()=>[e(de,null,{default:l(()=>[_t]),_:1}),e(oe,null,{default:l(()=>[e(Ie,{onSubmit:a(S)},{default:l(()=>[e(le,{modelValue:a(L),"onUpdate:modelValue":x[0]||(x[0]=w=>C(L)?L.value=w:null),label:"Comentário","error-messages":a(h).comment},null,8,["modelValue","error-messages"]),e(He,{modelValue:a(O),"onUpdate:modelValue":x[1]||(x[1]=w=>C(O)?O.value=w:null),label:"Selecionar Arquivos","error-messages":a(h).files,"show-size":"",multiple:""},null,8,["modelValue","error-messages"])]),_:1},8,["onSubmit"])]),_:1}),e(Te,null,{default:l(()=>[e(T,{color:"blue darken-1",text:"",onClick:x[2]||(x[2]=w=>N.value=!1)},{default:l(()=>[bt]),_:1}),e(T,{color:"blue darken-1",text:"",loading:a($),onClick:a(S)},{default:l(()=>[yt]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}},Vt=m("span",{class:"text-h5"},"Anexos do Chamado",-1),kt=["href"],gt=E("Fechar"),ht={props:{taskId:{type:Number,required:!0},showAttachmentsModal:{type:Boolean,required:!0}},emits:["update:showAttachmentsModal"],setup(u,{emit:n}){const o=u,c=be(),{taskFiles:R}=xe(c),F=r(!1);ue(()=>o.showAttachmentsModal,async A=>{A?(await c.getTaskFiles(o.taskId),F.value=!0):F.value=!1});const N=()=>{n("update:showAttachmentsModal",!1)},p=async A=>{await c.deleteTaskFile(A),await c.getTaskFiles(o.taskId)};return(A,h)=>(g(),te(ne,{modelValue:F.value,"onUpdate:modelValue":h[0]||(h[0]=$=>F.value=$),"max-width":"800px"},{default:l(()=>[e(se,null,{default:l(()=>[e(de,null,{default:l(()=>[Vt]),_:1}),e(oe,null,{default:l(()=>[e(Ce,null,{default:l(()=>[e(_,null,{default:l(()=>[(g(!0),P(we,null,$e(a(R),($,S)=>(g(),te(i,{key:S,cols:"12"},{default:l(()=>[e(se,{class:"mb-3"},{default:l(()=>[e(oe,null,{default:l(()=>[m("a",{href:a(Xe)($.path),target:"_blank"},Z($.name),9,kt),e(T,{icon:"",onClick:L=>p($.id)},{default:l(()=>[e(a(sl))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(Te,null,{default:l(()=>[e(T,{color:"secondary",onClick:N},{default:l(()=>[gt]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},xt={class:"mb-5 pb-5 border-b border-opacity-100"},wt=E("Novo Chamado"),Ct=E("Adicionar chamado"),St=E("Visualizar chamado"),Ut=E("Editar chamado"),$t=E("Cancelar"),Tt=E("Deletar"),At=m("span",{class:"text-h5"},"Adicionar Nota de Trabalho",-1),Ft=E("Cancelar"),Mt=E("Adicionar"),Dt={setup(u){const n=ze(),o=be(),{toShow:c,toEdit:R,toDelete:F}=xe(o),N=We();xe(N);const{isLoading:p}=he(o.getTasks());he(o.getPriorities()),he(o.getComplexities()),he(o.getTasksStatus()),he(o.getUsers());const A=Y({get(){return!!Object.keys(R.value).length},set(k){k||(R.value={})}}),h=Y({get(){return!!Object.keys(c.value).length},set(k){k||(c.value={})}}),$=Y({get(){return!!Object.keys(F.value).length},set(k){k||(F.value={})}}),S=r(!1);async function L(k){S.value=!0,await o.deleteTask(k.id),F.value={},S.value=!1}const O=r(!1),U=r(null),z=r(!1),M=r(""),x=r(n.user.id),I=k=>{U.value=k.id,O.value=!0},w=k=>{U.value=k.id,z.value=!0},G=async()=>{await N.addMessage(U.value,M.value,x.value),M.value="",z.value=!1},J=r(!1),B=k=>{U.value=k.id,J.value=!0},q=r("");return ue(q,k=>{o.getTasks(k)}),(k,s)=>(g(),P("div",null,[m("div",xt,[e(_,null,{default:l(()=>[e(i,{cols:"12",lg:"4",md:"6"},{default:l(()=>[e(K,{density:"compact",modelValue:q.value,"onUpdate:modelValue":s[0]||(s[0]=t=>q.value=t),label:"Pesquisar Chamados","append-inner-icon":"mdi-magnify","hide-details":"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(i,{class:"text-right"},{default:l(()=>[e(ne,{width:"800"},{activator:l(({props:t})=>[e(T,ie({flat:"",color:"primary"},t),{default:l(()=>[wt]),_:2},1040)]),default:l(({isActive:t})=>[e(se,{width:"800"},{default:l(()=>[e(de,null,{default:l(()=>[Ct]),_:1}),e(oe,null,{default:l(()=>[e(nt,{onAdd:y=>t.value=!1,onCancel:y=>t.value=!1},null,8,["onAdd","onCancel"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1})]),_:1})]),a(p)?(g(),te(pl,{key:0,width:3,color:"primary",indeterminate:""})):(g(),P(we,{key:1},[e(it,{onOpenChat:I,onAddNote:w,onOpenAttachments:B}),e(ne,{modelValue:a(h),"onUpdate:modelValue":s[1]||(s[1]=t=>C(h)?h.value=t:null),width:"800"},{default:l(({isActive:t})=>[e(se,{width:"800"},{default:l(()=>[e(de,null,{default:l(()=>[St]),_:1}),e(oe,null,{default:l(()=>[e(dt,{task:a(c),onCancel:y=>t.value=!1,onShow:y=>t.value=!1},null,8,["task","onCancel","onShow"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]),e(ne,{modelValue:a(A),"onUpdate:modelValue":s[2]||(s[2]=t=>C(A)?A.value=t:null),width:"800"},{default:l(({isActive:t})=>[e(se,{width:"800"},{default:l(()=>[e(de,null,{default:l(()=>[Ut]),_:1}),e(oe,null,{default:l(()=>[e(ut,{task:a(R),onCancel:y=>t.value=!1,onEdit:y=>t.value=!1},null,8,["task","onCancel","onEdit"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]),e(ne,{modelValue:a($),"onUpdate:modelValue":s[4]||(s[4]=t=>C($)?$.value=t:null),width:"800"},{default:l(({isActive:t})=>[e(se,{"prepend-icon":a(Ne),title:"Você tem certeza que deseja deletar este chamado?"},{actions:l(()=>[e(cl),e(T,{onClick:y=>t.value=!1},{default:l(()=>[$t]),_:2},1032,["onClick"]),e(T,{onClick:s[3]||(s[3]=y=>L(a(F))),variant:"tonal",color:"error",loading:S.value},{default:l(()=>[Tt]),_:1},8,["loading"])]),_:2},1032,["prepend-icon"])]),_:1},8,["modelValue"])],64)),e(Re,{taskId:U.value,showChatModal:O.value,userId:x.value,"onUpdate:showChatModal":s[5]||(s[5]=t=>O.value=t)},null,8,["taskId","showChatModal","userId"]),e(ne,{modelValue:z.value,"onUpdate:modelValue":s[8]||(s[8]=t=>z.value=t),"max-width":"500px"},{default:l(()=>[e(se,null,{default:l(()=>[e(de,null,{default:l(()=>[At]),_:1}),e(oe,null,{default:l(()=>[e(Re,{taskId:U.value,showChatModal:O.value,userId:x.value,"onUpdate:showChatModal":s[6]||(s[6]=t=>O.value=t)},null,8,["taskId","showChatModal","userId"])]),_:1}),e(Te,null,{default:l(()=>[e(T,{color:"blue darken-1",text:"",onClick:s[7]||(s[7]=t=>z.value=!1)},{default:l(()=>[Ft]),_:1}),e(T,{color:"blue darken-1",text:"",onClick:G},{default:l(()=>[Mt]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ht,{taskId:U.value,showAttachmentsModal:J.value,"onUpdate:showAttachmentsModal":s[9]||(s[9]=t=>J.value=t)},null,8,["taskId","showAttachmentsModal"])]))}};export{Dt as default};
