import{_ as E}from"./principal_syscall-fb96c94f.js";import"./customizer-c2ce4f6f.js";import{v as A,J as R,ag as B,ah as V,o as r,c as h,e as g,w as t,d as a,t as C,ai as $,l as p,b as e,aK as y,aj as S,y as l,ak as F,V as T,W as D,al as L,F as N,a as n,r as M,a7 as U,a0 as q}from"./index-fc9b34ed.js";import{u as z,a as P}from"./vee-validate.esm-a02ea01b.js";const O=n("p",{class:"text-subtitle-1 py-6 text-10"}," Por favor, insira o endereço de e-mail associado à sua conta e nós lhe enviaremos um link por e-mail, para redefinir sua senha. ",-1),J={__name:"ForgotPasswordForm",emits:["after-request"],setup(v,{emit:o}){const c=A(),s=R(null),_=B({email:V().required().email().label("E-mail")}),{handleSubmit:x,errors:f,isSubmitting:b}=z({validationSchema:_,initialValues:{email:""}}),w=x(async m=>{s.value=null,await c.forgotPassword(m.email).then(()=>{o("after-request")}).catch(i=>{s.value=i.message})}),{value:d}=P("email");return(m,i)=>(r(),h(N,null,[s.value?(r(),g($,{key:0,color:"error"},{default:t(()=>[a(C(s.value),1)]),_:1})):p("",!0),e(L,{onSubmit:D(l(w),["prevent"]),class:"mt-sm-13 mt-8"},{default:t(()=>[O,e(y,{class:"text-subtitle-1 font-weight-semibold pb-2 text-lightText"},{default:t(()=>[a("E-mail")]),_:1}),e(S,{modelValue:l(d),"onUpdate:modelValue":i[0]||(i[0]=u=>F(d)?d.value=u:null),placeholder:"email@agcocorp.com",type:"email",autofocus:"","error-messages":l(f).email},null,8,["modelValue","error-messages"]),e(T,{size:"large",type:"submit",loading:l(b),color:"primary",block:"",flat:""},{default:t(()=>[a("Recuperar senha ")]),_:1},8,["loading"])]),_:1},8,["onSubmit"])],64))}},K={class:"mt-sm-13 mt-8"},W={class:"d-flex"},Z={class:"d-flex"},G={class:"text-h6 mt-5 font-weight-regular"},H={__name:"ResetPasswordForm",emits:["after-reset"],setup(v,{emit:o}){const c=A(),s=R(null),_=B({token:V().required().label("Token"),password:V().min(8).required().matches(/^(?=.*[a-zA-Z])(?=.*[0-9])/,"Senha deve conter 8 caracteres e pelo menos uma letra e um número").label("Senha")}),{handleSubmit:x,errors:f,isSubmitting:b}=z({validationSchema:_,initialValues:{token:"",password:""}}),w=x(async i=>{s.value=null,await c.resetPassword(i.token,i.password).then(()=>{o("after-reset")}).catch(u=>{s.value=u.message})}),{value:d}=P("token"),{value:m}=P("password");return(i,u)=>{const j=M("RouterLink");return r(),h(N,null,[s.value?(r(),g($,{key:0,color:"error"},{default:t(()=>[a(C(s.value),1)]),_:1})):p("",!0),e(L,{onSubmit:D(l(w),["prevent"]),class:"mt-sm-13 mt-8"},{default:t(()=>[n("div",K,[e(y,{class:"text-subtitle-1 font-weight-semibold pb-2 text-lightText"},{default:t(()=>[a("Digite o seu código de segurança de 6 dígitos.")]),_:1}),n("div",W,[e(S,{modelValue:l(d),"onUpdate:modelValue":u[0]||(u[0]=k=>F(d)?d.value=k:null),autofocus:"",maxlength:6,"error-messages":l(f).token},null,8,["modelValue","error-messages"])]),e(y,{class:"text-subtitle-1 font-weight-semibold pb-2 text-lightText"},{default:t(()=>[a("Digite a nova senha.")]),_:1}),n("div",Z,[e(S,{modelValue:l(m),"onUpdate:modelValue":u[1]||(u[1]=k=>F(m)?m.value=k:null),type:"password",autofocus:"","error-messages":l(f).password},null,8,["modelValue","error-messages"])]),e(T,{size:"large",type:"submit",loading:l(b),color:"primary",block:"",flat:""},{default:t(()=>[a("Resetar a senha ")]),_:1},8,["loading"]),n("h6",G,[a(" Didn't get the code? "),e(j,{to:"/",class:"text-primary text-subtitle-1 text-decoration-none pl-1 font-weight-medium"},{default:t(()=>[a(" Resend")]),_:1})])])]),_:1},8,["onSubmit"])],64)}}},I={__name:"ForgotPassword",setup(v){const o=R("forgotPassword");return(c,s)=>(r(),h("div",null,[o.value==="forgotPassword"?(r(),g(J,{key:0,onAfterRequest:s[0]||(s[0]=_=>o.value="resetPassword")})):p("",!0),o.value==="resetPassword"?(r(),g(H,{key:1,onAfterReset:s[1]||(s[1]=_=>o.value="reset")})):p("",!0),o.value==="reset"?(r(),g($,{key:2,color:"success",class:"mb-2"},{default:t(()=>[a(" Sua senha foi redefinida com sucesso! ")]),_:1})):p("",!0)]))}};const Q={class:"pa-3"},X=n("div",{class:"image-container"},[n("img",{src:E,class:"login-image",alt:"forgot-password-background"})],-1),Y={class:"pa-sm-7 pa-4"},ee=n("h2",{class:"text--darken-2 text-h4 font-weight-bold"},"D-CONTROL",-1),le={__name:"SideForgotPassword",setup(v){return(o,c)=>(r(),h("div",Q,[e(U,{class:"h-100vh mh-100 auth"},{default:t(()=>[e(q,{cols:"12",lg:"8",xl:"8",xxl:"9",class:"d-lg-flex align-center justify-center position-relative auth-background"},{default:t(()=>[X]),_:1}),e(q,{cols:"12",lg:"4",xl:"4",xxl:"3",class:"d-flex align-center justify-center"},{default:t(()=>[n("div",Y,[ee,e(I),e(T,{size:"large",color:"lightprimary",to:"/login",block:"",class:"mt-5 text-primary",flat:""},{default:t(()=>[a("Voltar para Login")]),_:1})])]),_:1})]),_:1})]))}};export{le as default};
