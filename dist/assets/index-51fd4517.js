import{P as re,i as Y}from"./vue-tabler-icons.es-24de2d43.js";import{a3 as de,a4 as z,a5 as Z,o as x,e as T,w as t,a as i,c as q,q as ue,d as b,t as E,i as L,l as H,b as e,V as C,p as G,y as l,z as K,F as J,a6 as ne,a7 as ee,a8 as N,ak as U,L as B,a9 as te,a0 as le,ai as F,_ as s,aa as ae,ab as v,al as D,am as I,S as oe,ac as se,C as ce,ad as me,B as Q,ae as M,af as R,ag as W,ah as X,T as fe,aj as pe}from"./index-4d41c103.js";import{u as ie,a as y}from"./vee-validate.esm-cfa57b0f.js";const O=de("priorities",{state:()=>({priorities:[],toEdit:{},toDelete:{}}),actions:{async getPriorities(){this.priorities=await z.get("api/priorities").then(p=>p.data.data)},async storePriority(p){await z.post("api/priorities",p).then(r=>r.data.data),await this.getPriorities()},async updatePriority(p,r){const o=await z.put(`api/priorities/${p}`,r).then(g=>g.data.data),V=this.priorities.findIndex(g=>g.id===p);console.log(V),this.priorities.splice(V,1,o),this.getPriorities()},async deletePriority(p){await z.delete(`api/priorities/${p}`).then(o=>o.data.data);const r=this.priorities.findIndex(o=>o.id===p);this.priorities.splice(r,1)}}}),_e=i("thead",null,[i("tr",null,[i("th",{class:"text-left"},"Nome"),i("th",{class:"text-left"},"Ativo/Inativo"),i("th",{class:"text-left"},"Justificar"),i("th",{class:"text-left"},"Ações")])],-1),ve=b(" Default "),Ve={class:"text-right"},be={class:"d-flex align-center"},he={setup(p){const r=O(),{priorities:o,toEdit:V,toDelete:g}=Z(r);return(w,$)=>(x(),T(ne,{class:"border-opacity-100"},{default:t(()=>[_e,i("tbody",null,[(x(!0),q(J,null,ue(l(o),(u,k)=>(x(),q("tr",{key:k},[i("td",null,[b(E(u.name)+" ",1),u.is_default?(x(),T(L,{key:0,size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:t(()=>[ve]),_:1})):H("",!0)]),i("td",null,[e(L,{size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:t(()=>[b(E(u.status?"Ativo":"Inativo"),1)]),_:2},1024)]),i("td",null,[e(L,{size:"small",variant:"tonal",color:"primary",class:"ml-2"},{default:t(()=>[b(E(u.justify?"Sim":"Não"),1)]),_:2},1024)]),i("td",Ve,[i("div",be,[e(K,{text:"Edit"},{activator:t(({props:n})=>[e(C,G({icon:"",flat:"",onClick:c=>V.value=u},n),{default:t(()=>[e(l(re),{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024),e(K,{text:"Delete"},{activator:t(({props:n})=>[e(C,G({icon:"",flat:"",onClick:c=>g.value=u},n),{default:t(()=>[e(l(Y),{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024)])])]))),128))])]),_:1}))}},ye=i("div",{class:"d-flex"},"Cor do texto:",-1),ge=i("div",{class:"d-flex"},"Cor de fundo do texto:",-1),Fe={emits:["cancel","add"],setup(p,{emit:r}){const o=O(),V=ee({name:N().required().label("Nome"),is_default:U().required().label("Padrão"),status:U().required().label("Status"),justify:U().required().label("Justificar"),color:N().label("Cor do texto"),bg_color:N().label("Cor de fundo do texto")}),{handleSubmit:g,errors:w,isSubmitting:$}=ie({validationSchema:V,initialValues:{name:"",is_default:!1,status:!0,justify:!1,color:"#cecece",bg_color:"#cecece"}}),u=g(async A=>{await o.storePriority(A),r("add")}),k=B(""),{value:n}=y("name"),{value:c}=y("is_default"),{value:a}=y("status"),{value:m}=y("justify"),{value:P}=y("color"),{value:S}=y("bg_color"),j=[["#FF0000","#00FF00","#0000FF","#FFFF00"],["#FF00FF","#00FFFF","#800000","#808000"],["#800080","#008080","#000080","#FFA500"],["#A52A2A","#008000","#FFD700","#4B0082"]];return(A,d)=>(x(),q(J,null,[k.value?(x(),T(te,{key:0,color:"error",class:"mb-2"},{default:t(()=>[b(E(k.value),1)]),_:1})):H("",!0),e(se,{onSubmit:oe(l(u),["prevent"])},{default:t(()=>[e(le,null,{default:t(()=>[e(F,null,{default:t(()=>[e(s,{cols:"12",md:"6"},{default:t(()=>[e(ae,{modelValue:l(n),"onUpdate:modelValue":d[0]||(d[0]=f=>v(n)?n.value=f:null),"error-messages":l(w).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(D,{modelValue:l(c),"onUpdate:modelValue":d[1]||(d[1]=f=>v(c)?c.value=f:null),label:l(c)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(s,{cols:"12",md:"6"},{default:t(()=>[e(D,{modelValue:l(a),"onUpdate:modelValue":d[2]||(d[2]=f=>v(a)?a.value=f:null),label:l(a)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(D,{modelValue:l(m),"onUpdate:modelValue":d[3]||(d[3]=f=>v(m)?m.value=f:null),label:l(m)?"Justificar":"Não justificar",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[ye,e(I,{modelValue:l(P),"onUpdate:modelValue":d[4]||(d[4]=f=>v(P)?P.value=f:null),swatches:j,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":l(w).color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[ge,e(I,{modelValue:l(S),"onUpdate:modelValue":d[5]||(d[5]=f=>v(S)?S.value=f:null),swatches:j,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":l(w).bg_color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(F,{justify:"end"},{default:t(()=>[e(s,{cols:"auto"},{default:t(()=>[e(C,{flat:"",text:"Cancelar",onClick:d[6]||(d[6]=f=>r("cancel"))})]),_:1}),e(s,{cols:"auto"},{default:t(()=>[e(C,{type:"submit",color:"primary",flat:"",loading:l($),text:"Adicionar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},xe=i("div",{class:"d-flex"},"Cor do texto:",-1),we=i("div",{class:"d-flex"},"Cor de fundo do texto:",-1),Ce=b("Cancelar"),$e=b("Editar"),ke={props:{priority:{type:Object,required:!0}},emits:["cancel","edit"],setup(p,{emit:r}){const o=p,V=B(!0),g=O(),w=ee({name:N().required().label("Nome"),is_default:U().required().label("Padrão"),status:U().required().label("Status"),justify:U().required().label("Justificar"),color:N().label("Cor do texto"),bg_color:N().label("Cor de fundo do texto")}),{handleSubmit:$,errors:u,isSubmitting:k}=ie({validationSchema:w,initialValues:{name:o.priority.name,is_default:o.priority.is_default,status:o.priority.status,justify:o.priority.justify,color:o.priority.color,bg_color:o.priority.bg_color}}),n=$(async f=>{await g.updatePriority(o.priority.id,f),r("edit"),V.value=!1}),c=B(""),{value:a}=y("name"),{value:m}=y("is_default"),{value:P}=y("status"),{value:S}=y("justify"),{value:j}=y("color"),{value:A}=y("bg_color"),d=[["#FF0000","#00FF00","#0000FF","#FFFF00"],["#FF00FF","#00FFFF","#800000","#808000"],["#800080","#008080","#000080","#FFA500"],["#A52A2A","#008000","#FFD700","#4B0082"]];return(f,_)=>(x(),q(J,null,[c.value?(x(),T(te,{key:0,color:"error",class:"mb-2"},{default:t(()=>[b(E(c.value),1)]),_:1})):H("",!0),e(se,{onSubmit:oe(l(n),["prevent"])},{default:t(()=>[e(le,null,{default:t(()=>[e(F,null,{default:t(()=>[e(s,{cols:"12",md:"6"},{default:t(()=>[e(ae,{modelValue:l(a),"onUpdate:modelValue":_[0]||(_[0]=h=>v(a)?a.value=h:null),"error-messages":l(u).name,label:"Nome",variant:"outlined",color:"primary"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(D,{modelValue:l(m),"onUpdate:modelValue":_[1]||(_[1]=h=>v(m)?m.value=h:null),label:l(m)?"Padrão":"Não é Padrão",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(s,{cols:"12",md:"6"},{default:t(()=>[e(D,{modelValue:l(P),"onUpdate:modelValue":_[2]||(_[2]=h=>v(P)?P.value=h:null),label:l(P)?"Ativo":"Inativo",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(D,{modelValue:l(S),"onUpdate:modelValue":_[3]||(_[3]=h=>v(S)?S.value=h:null),label:l(S)?"Justificar":"Não justificar",color:"primary",inset:""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[xe,e(I,{modelValue:l(j),"onUpdate:modelValue":_[4]||(_[4]=h=>v(j)?j.value=h:null),swatches:d,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":l(u).color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[we,e(I,{modelValue:l(A),"onUpdate:modelValue":_[5]||(_[5]=h=>v(A)?A.value=h:null),swatches:d,class:"ma-2","hide-mode-switch":"","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","error-messages":l(u).bg_color},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(F,{justify:"end"},{default:t(()=>[e(s,{cols:"auto"},{default:t(()=>[e(C,{flat:"",onClick:_[6]||(_[6]=h=>r("cancel"))},{default:t(()=>[Ce]),_:1})]),_:1}),e(s,{cols:"auto"},{default:t(()=>[e(C,{type:"submit",color:"primary",flat:"",loading:l(k)},{default:t(()=>[$e]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},Pe={class:"mb-5 pb-5 border-b border-opacity-100"},Se=i("h1",{class:"text-h3"},"Prioridades dos chamados",-1),je=b("Nova prioridade "),Ae=b("Adicionar prioridade"),Ne=b("Editar prioridade"),Ue=b(" Cancelar "),De=b(" Deletar "),Be=ce({setup(p){const r=O(),{toEdit:o,toDelete:V}=Z(r),{isLoading:g}=me(r.getPriorities()),w=Q({get(){return!!Object.keys(o.value).length},set(n){n||(o.value={})}}),$=Q({get(){return!!Object.keys(V.value).length},set(n){n||(V.value={})}}),u=B(!1);async function k(n){u.value=!0,await r.deletePriority(n.id),V.value={},u.value=!1}return B([{text:"2 New Priority",disabled:!0,href:"#"}]),(n,c)=>(x(),q("div",null,[i("div",Pe,[e(F,null,{default:t(()=>[e(s,null,{default:t(()=>[Se]),_:1}),e(s,{class:"text-right"},{default:t(()=>[e(M,{width:"auto"},{activator:t(({props:a})=>[e(C,G({flat:"",color:"primary"},a),{default:t(()=>[je]),_:2},1040)]),default:t(({isActive:a})=>[e(R,{width:"400"},{default:t(()=>[e(W,null,{default:t(()=>[Ae]),_:1}),e(X,null,{default:t(()=>[e(Fe,{onAdd:m=>a.value=!1,onCancel:m=>a.value=!1},null,8,["onAdd","onCancel"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1})]),_:1})]),l(g)?(x(),T(pe,{key:0,width:3,color:"primary",indeterminate:""})):(x(),q(J,{key:1},[e(he),e(M,{modelValue:l(w),"onUpdate:modelValue":c[0]||(c[0]=a=>v(w)?w.value=a:null),width:"auto"},{default:t(({isActive:a})=>[e(R,{width:"400"},{default:t(()=>[e(W,null,{default:t(()=>[Ne]),_:1}),e(X,null,{default:t(()=>[e(ke,{priority:l(o),onCancel:m=>a.value=!1,onEdit:m=>a.value=!1},null,8,["priority","onCancel","onEdit"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]),e(M,{modelValue:l($),"onUpdate:modelValue":c[2]||(c[2]=a=>v($)?$.value=a:null),width:"auto"},{default:t(({isActive:a})=>[e(R,{"prepend-icon":l(Y),title:"Você tem certeza que deseja deletar esta prioridade?"},{actions:t(()=>[e(fe),e(C,{onClick:m=>a.value=!1},{default:t(()=>[Ue]),_:2},1032,["onClick"]),e(C,{onClick:c[1]||(c[1]=m=>k(l(V))),variant:"tonal",color:"error",loading:u.value},{default:t(()=>[De]),_:1},8,["loading"])]),_:2},1032,["prepend-icon"])]),_:1},8,["modelValue"])],64))]))}});export{Be as default};
